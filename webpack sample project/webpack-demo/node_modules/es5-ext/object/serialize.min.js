"use strict";var toArray=require("./to-array"),isDate=require("../date/is-date"),isValue=require("../object/is-value"),isRegExp=require("../reg-exp/is-reg-exp");var isArray=Array.isArray,stringify=JSON.stringify,objHasOwnProperty=Object.prototype.hasOwnProperty;var keyValueToString=function(b,a){return stringify(a)+":"+exports(b)};var sparseMap=function(b){var c,d=b.length,a=new Array(d);for(c=0;c<d;++c){if(!objHasOwnProperty.call(b,c)){continue}a[c]=exports(b[c])}return a};module.exports=exports=function(a){if(!isValue(a)){return String(a)}switch(typeof a){case"string":return stringify(a);case"number":case"boolean":case"function":return String(a);case"object":if(isArray(a)){return"["+sparseMap(a)+"]"}if(isRegExp(a)){return String(a)}if(isDate(a)){return"new Date("+a.valueOf()+")"}return"{"+toArray(a,keyValueToString)+"}";default:throw new TypeError("Serialization of "+String(a)+"is unsupported")}};