"use strict";var aFrom=require("es5-ext/array/from"),remove=require("es5-ext/array/#/remove"),value=require("es5-ext/object/valid-object"),d=require("d"),emit=require("./").methods.emit,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;module.exports=function(g,e){var c,b,f,a;(value(g)&&value(e));a=arguments[2];if(a===undefined){a="emit"}b={close:function(){remove.call(c,e)}};if(hasOwnProperty.call(g,"__eePipes__")){(c=g.__eePipes__).push(e);return b}defineProperty(g,"__eePipes__",d("c",c=[e]));f=getOwnPropertyDescriptor(g,a);if(!f){f=d("c",undefined)}else{delete f.get;delete f.set}f.value=function(){var h,k,j=aFrom(c);emit.apply(this,arguments);for(h=0;(k=j[h]);++h){emit.apply(k,arguments)}};defineProperty(g,a,f);return b};