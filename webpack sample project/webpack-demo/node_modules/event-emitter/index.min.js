"use strict";var d=require("d"),callable=require("es5-ext/object/valid-callable"),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:true,enumerable:false,writable:true},on,once,off,emit,methods,descriptors,base;on=function(a,c){var b;callable(c);if(!hasOwnProperty.call(this,"__ee__")){b=descriptor.value=create(null);defineProperty(this,"__ee__",descriptor);descriptor.value=null}else{b=this.__ee__}if(!b[a]){b[a]=c}else{if(typeof b[a]==="object"){b[a].push(c)}else{b[a]=[b[a],c]}}return this};once=function(c,e){var b,a;callable(e);a=this;on.call(this,c,b=function(){off.call(a,c,b);apply.call(e,this,arguments)});b.__eeOnceListener__=e;return this};off=function(e,g){var f,c,b,a;callable(g);if(!hasOwnProperty.call(this,"__ee__")){return this}f=this.__ee__;if(!f[e]){return this}c=f[e];if(typeof c==="object"){for(a=0;(b=c[a]);++a){if((b===g)||(b.__eeOnceListener__===g)){if(c.length===2){f[e]=c[a?0:1]}else{c.splice(a,1)}}}}else{if((c===g)||(c.__eeOnceListener__===g)){delete f[e]}}return this};emit=function(f){var c,a,g,e,b;if(!hasOwnProperty.call(this,"__ee__")){return}e=this.__ee__[f];if(!e){return}if(typeof e==="object"){a=arguments.length;b=new Array(a-1);for(c=1;c<a;++c){b[c-1]=arguments[c]}e=e.slice();for(c=0;(g=e[c]);++c){apply.call(g,this,b)}}else{switch(arguments.length){case 1:call.call(e,this);break;case 2:call.call(e,this,arguments[1]);break;case 3:call.call(e,this,arguments[1],arguments[2]);break;default:a=arguments.length;b=new Array(a-1);for(c=1;c<a;++c){b[c-1]=arguments[c]}apply.call(e,this,b)}}};methods={on:on,once:once,off:off,emit:emit};descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)};base=defineProperties({},descriptors);module.exports=exports=function(a){return(a==null)?create(base):defineProperties(Object(a),descriptors)};exports.methods=methods;