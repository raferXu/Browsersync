"use strict";var errorEx=require("error-ex");var fallback=require("./vendor/parse");var JSONError=errorEx("JSONError",{fileName:errorEx.append("in %s")});module.exports=function(b,a,c){if(typeof a==="string"){c=a;a=null}try{try{return JSON.parse(b,a)}catch(d){fallback.parse(b,{mode:"json",reviver:a});throw d}}catch(d){var e=new JSONError(d);if(c){e.fileName=c}throw e}};