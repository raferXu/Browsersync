module.exports=function normalize(g){var f=g.split(/(\\+|\/+)/);if(f.length===1){return g}var a=[];var e=0;for(var d=0,c=false;d<f.length;d++,c=!c){var b=f[d];if(d===0&&/^([A-Z]:)?$/i.test(b)){a.push(b);e=2}else{if(c){a.push(b[0])}else{if(b===".."){switch(a.length){case 0:a.push(b);break;case 2:d++;c=!c;a.length=e;break;case 4:if(e===0){a.length-=3}else{d++;c=!c;a.length=2}break;default:a.length-=3;break}}else{if(b==="."){switch(a.length){case 0:a.push(b);break;case 2:if(e===0){a.length--}else{d++;c=!c}break;default:a.length--;break}}else{if(b){a.push(b)}}}}}}if(a.length===1&&/^[A-Za-z]:$/.test(a)){return a[0]+"\\"}return a.join("")};