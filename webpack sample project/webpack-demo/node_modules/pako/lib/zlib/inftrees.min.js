"use strict";var utils=require("../utils/common");var MAXBITS=15;var ENOUGH_LENS=852;var ENOUGH_DISTS=592;var CODES=0;var LENS=1;var DISTS=2;var lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78];var dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0];var dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function inflate_table(c,I,q,F,E,C,p,m){var t=m.bits;var A=0;var l=0;var s=0,z=0;var r=0;var D=0;var j=0;var d=0;var g=0;var y=0;var x;var u;var J;var w;var o;var f=null;var n=0;var b;var h=new utils.Buf16(MAXBITS+1);var e=new utils.Buf16(MAXBITS+1);var a=null;var H=0;var B,k,G;for(A=0;A<=MAXBITS;A++){h[A]=0}for(l=0;l<F;l++){h[I[q+l]]++}r=t;for(z=MAXBITS;z>=1;z--){if(h[z]!==0){break}}if(r>z){r=z}if(z===0){E[C++]=(1<<24)|(64<<16)|0;E[C++]=(1<<24)|(64<<16)|0;m.bits=1;return 0}for(s=1;s<z;s++){if(h[s]!==0){break}}if(r<s){r=s}d=1;for(A=1;A<=MAXBITS;A++){d<<=1;d-=h[A];if(d<0){return -1}}if(d>0&&(c===CODES||z!==1)){return -1}e[1]=0;for(A=1;A<MAXBITS;A++){e[A+1]=e[A]+h[A]}for(l=0;l<F;l++){if(I[q+l]!==0){p[e[I[q+l]]++]=l}}if(c===CODES){f=a=p;b=19}else{if(c===LENS){f=lbase;n-=257;a=lext;H-=257;b=256}else{f=dbase;a=dext;b=-1}}y=0;l=0;A=s;o=C;D=r;j=0;J=-1;g=1<<r;w=g-1;if((c===LENS&&g>ENOUGH_LENS)||(c===DISTS&&g>ENOUGH_DISTS)){return 1}var v=0;for(;;){v++;B=A-j;if(p[l]<b){k=0;G=p[l]}else{if(p[l]>b){k=a[H+p[l]];G=f[n+p[l]]}else{k=32+64;G=0}}x=1<<(A-j);u=1<<D;s=u;do{u-=x;E[o+(y>>j)+u]=(B<<24)|(k<<16)|G|0}while(u!==0);x=1<<(A-1);while(y&x){x>>=1}if(x!==0){y&=x-1;y+=x}else{y=0}l++;if(--h[A]===0){if(A===z){break}A=I[q+p[l]]}if(A>r&&(y&w)!==J){if(j===0){j=r}o+=s;D=A-j;d=1<<D;while(D+j<z){d-=h[D+j];if(d<=0){break}D++;d<<=1}g+=1<<D;if((c===LENS&&g>ENOUGH_LENS)||(c===DISTS&&g>ENOUGH_DISTS)){return 1}J=y&w;E[J]=(r<<24)|(D<<16)|(o-C)|0}}if(y!==0){E[o+y]=((A-j)<<24)|(64<<16)|0}m.bits=r;return 0};