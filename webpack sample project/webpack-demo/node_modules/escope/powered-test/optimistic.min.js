(function(){var b,a,c;c=require("chai").expect;b=require("..");a=require("esprima");describe("optimistic",function(){it("direct call to eval",function(){var d,e;d=a.parse("function outer() {\n    eval(str);\n    var i = 20;\n    function inner() {\n        i;\n    }\n}");e=b.analyze(d,{optimistic:true}).scopes;return c(e.map(function(f){return f.variables.map(function(g){return g.name})})).to.be.eql([["outer"],["arguments","i","inner"],["arguments"]])});return it("with statement",function(){var d,e;d=a.parse("function outer() {\n    eval(str);\n    var i = 20;\n    with (obj) {\n        i;\n    }\n}");e=b.analyze(d,{optimistic:true}).scopes;return c(e.map(function(f){return f.variables.map(function(g){return g.name})})).to.be.eql([["outer"],["arguments","i"],[]])})})}).call(this);