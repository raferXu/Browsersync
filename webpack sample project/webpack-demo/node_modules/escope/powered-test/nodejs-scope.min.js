(function(){var b,c,a;c=require("chai").expect;a=require("../third_party/esprima");b=require("..");describe("nodejsScope option",function(){it("creates a function scope following the global scope immediately",function(){var d,e,f;d=a.parse("'use strict';\nvar hello = 20;");f=b.analyze(d,{ecmaVersion:6,nodejsScope:true});c(f.scopes).to.have.length(2);e=f.scopes[0];c(e.type).to.be.equal("global");c(e.block.type).to.be.equal("Program");c(e.isStrict).to.be["false"];c(e.variables).to.have.length(0);e=f.scopes[1];c(e.type).to.be.equal("function");c(e.block.type).to.be.equal("Program");c(e.isStrict).to.be["true"];c(e.variables).to.have.length(2);c(e.variables[0].name).to.be.equal("arguments");return c(e.variables[1].name).to.be.equal("hello")});return it("creates a function scope following the global scope immediately and creates module scope",function(){var d,e,f;d=a.parse('import {x as v} from "mod";',{sourceType:"module"});f=b.analyze(d,{ecmaVersion:6,nodejsScope:true,sourceType:"module"});c(f.scopes).to.have.length(3);e=f.scopes[0];c(e.type).to.be.equal("global");c(e.block.type).to.be.equal("Program");c(e.isStrict).to.be["false"];c(e.variables).to.have.length(0);e=f.scopes[1];c(e.type).to.be.equal("function");c(e.block.type).to.be.equal("Program");c(e.isStrict).to.be["false"];c(e.variables).to.have.length(1);c(e.variables[0].name).to.be.equal("arguments");e=f.scopes[2];c(e.type).to.be.equal("module");c(e.variables).to.have.length(1);c(e.variables[0].name).to.be.equal("v");c(e.variables[0].defs[0].type).to.be.equal("ImportBinding");return c(e.references).to.have.length(0)})})}).call(this);