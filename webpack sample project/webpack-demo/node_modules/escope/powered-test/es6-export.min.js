(function(){var b,c,a;c=require("chai").expect;a=require("../third_party/esprima");b=require("..");describe("export declaration",function(){it("should create vairable bindings",function(){var d,e,f,g;d=a.parse("export var v;",{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(2);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(1);c(f.variables[0].name).to.be.equal("v");c(f.variables[0].defs[0].type).to.be.equal("Variable");return c(f.references).to.have.length(0)});it("should create function declaration bindings",function(){var d,e,f,g;d=a.parse("export default function f(){};",{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(3);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(1);c(f.variables[0].name).to.be.equal("f");c(f.variables[0].defs[0].type).to.be.equal("FunctionName");c(f.references).to.have.length(0);f=g.scopes[2];c(f.type).to.be.equal("function");c(f.variables).to.have.length(1);c(f.variables[0].name).to.be.equal("arguments");return c(f.references).to.have.length(0)});it("should export function expression",function(){var d,e,f,g;d=a.parse("export default function(){};",{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(3);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(0);c(f.references).to.have.length(0);f=g.scopes[2];c(f.type).to.be.equal("function");c(f.variables).to.have.length(1);c(f.variables[0].name).to.be.equal("arguments");return c(f.references).to.have.length(0)});it("should export literal",function(){var d,e,f,g;d=a.parse("export default 42;",{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(2);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(0);return c(f.references).to.have.length(0)});it("should refer exported references#1",function(){var d,e,f,g;d=a.parse("export {x};",{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(2);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(0);c(f.references).to.have.length(1);return c(f.references[0].identifier.name).to.be.equal("x")});it("should refer exported references#2",function(){var d,e,f,g;d=a.parse("export {v as x};",{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(2);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(0);c(f.references).to.have.length(1);return c(f.references[0].identifier.name).to.be.equal("v")});it("should not refer exported references from other source#1",function(){var d,e,f,g;d=a.parse('export {x} from "mod";',{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(2);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(0);return c(f.references).to.have.length(0)});it("should not refer exported references from other source#2",function(){var d,e,f,g;d=a.parse('export {v as x} from "mod";',{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(2);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(0);return c(f.references).to.have.length(0)});return it("should not refer exported references from other source#3",function(){var d,e,f,g;d=a.parse('export * from "mod";',{sourceType:"module"});g=b.analyze(d,{ecmaVersion:6,sourceType:"module"});c(g.scopes).to.have.length(2);e=g.scopes[0];c(e.type).to.be.equal("global");c(e.variables).to.have.length(0);c(e.references).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("module");c(f.variables).to.have.length(0);return c(f.references).to.have.length(0)})})}).call(this);