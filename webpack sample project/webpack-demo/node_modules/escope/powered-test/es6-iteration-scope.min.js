(function(){var b,c,a;c=require("chai").expect;a=require("../third_party/esprima");b=require("..");describe("ES6 iteration scope",function(){it("let materialize iteration scope for ForInStatement#1",function(){var d,e,f,g;d=a.parse("(function () {\n    let i = 20;\n    for (let i in i) {\n        console.log(i);\n    }\n}());");g=b.analyze(d,{ecmaVersion:6});c(g.scopes).to.have.length(5);f=g.scopes[0];c(f.type).to.be.equal("global");c(f.variables).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("function");c(f.variables).to.have.length(2);c(f.variables[0].name).to.be.equal("arguments");c(f.variables[1].name).to.be.equal("i");c(f.references).to.have.length(1);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[1]);e=f=g.scopes[2];c(f.type).to.be.equal("TDZ");c(f.variables).to.have.length(1);c(f.variables[0].name).to.be.equal("i");c(f.variables[0].defs[0].type).to.be.equal("TDZ");c(f.references).to.have.length(1);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[0]);e=f=g.scopes[3];c(f.type).to.be.equal("for");c(f.variables).to.have.length(1);c(f.variables[0].name).to.be.equal("i");c(f.references).to.have.length(1);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[0]);f=g.scopes[4];c(f.type).to.be.equal("block");c(f.variables).to.have.length(0);c(f.references).to.have.length(2);c(f.references[0].identifier.name).to.be.equal("console");c(f.references[0].resolved).to.be.equal(null);c(f.references[1].identifier.name).to.be.equal("i");return c(f.references[1].resolved).to.be.equal(e.variables[0])});it("let materialize iteration scope for ForInStatement#2",function(){var d,e,f,g;d=a.parse("(function () {\n    let i = 20;\n    for (let { i, j, k } in i) {\n        console.log(i);\n    }\n}());");g=b.analyze(d,{ecmaVersion:6});c(g.scopes).to.have.length(5);f=g.scopes[0];c(f.type).to.be.equal("global");c(f.variables).to.have.length(0);f=g.scopes[1];c(f.type).to.be.equal("function");c(f.variables).to.have.length(2);c(f.variables[0].name).to.be.equal("arguments");c(f.variables[1].name).to.be.equal("i");c(f.references).to.have.length(1);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[1]);e=f=g.scopes[2];c(f.type).to.be.equal("TDZ");c(f.variables).to.have.length(3);c(f.variables[0].name).to.be.equal("i");c(f.variables[0].defs[0].type).to.be.equal("TDZ");c(f.variables[1].name).to.be.equal("j");c(f.variables[1].defs[0].type).to.be.equal("TDZ");c(f.variables[2].name).to.be.equal("k");c(f.variables[2].defs[0].type).to.be.equal("TDZ");c(f.references).to.have.length(1);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[0]);e=f=g.scopes[3];c(f.type).to.be.equal("for");c(f.variables).to.have.length(3);c(f.variables[0].name).to.be.equal("i");c(f.variables[1].name).to.be.equal("j");c(f.variables[2].name).to.be.equal("k");c(f.references).to.have.length(3);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[0]);c(f.references[1].identifier.name).to.be.equal("j");c(f.references[1].resolved).to.be.equal(f.variables[1]);c(f.references[2].identifier.name).to.be.equal("k");c(f.references[2].resolved).to.be.equal(f.variables[2]);f=g.scopes[4];c(f.type).to.be.equal("block");c(f.variables).to.have.length(0);c(f.references).to.have.length(2);c(f.references[0].identifier.name).to.be.equal("console");c(f.references[0].resolved).to.be.equal(null);c(f.references[1].identifier.name).to.be.equal("i");return c(f.references[1].resolved).to.be.equal(e.variables[0])});return it("let materialize iteration scope for ForStatement#2",function(){var d,g,e,f,h;d=a.parse("(function () {\n    let i = 20;\n    let obj = {};\n    for (let { i, j, k } = obj; i < okok; ++i) {\n        console.log(i, j, k);\n    }\n}());");h=b.analyze(d,{ecmaVersion:6});c(h.scopes).to.have.length(4);f=h.scopes[0];c(f.type).to.be.equal("global");c(f.variables).to.have.length(0);g=f=h.scopes[1];c(f.type).to.be.equal("function");c(f.variables).to.have.length(3);c(f.variables[0].name).to.be.equal("arguments");c(f.variables[1].name).to.be.equal("i");c(f.variables[2].name).to.be.equal("obj");c(f.references).to.have.length(2);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[1]);c(f.references[1].identifier.name).to.be.equal("obj");c(f.references[1].resolved).to.be.equal(f.variables[2]);e=f=h.scopes[2];c(f.type).to.be.equal("for");c(f.variables).to.have.length(3);c(f.variables[0].name).to.be.equal("i");c(f.variables[0].defs[0].type).to.be.equal("Variable");c(f.variables[1].name).to.be.equal("j");c(f.variables[1].defs[0].type).to.be.equal("Variable");c(f.variables[2].name).to.be.equal("k");c(f.variables[2].defs[0].type).to.be.equal("Variable");c(f.references).to.have.length(7);c(f.references[0].identifier.name).to.be.equal("i");c(f.references[0].resolved).to.be.equal(f.variables[0]);c(f.references[1].identifier.name).to.be.equal("j");c(f.references[1].resolved).to.be.equal(f.variables[1]);c(f.references[2].identifier.name).to.be.equal("k");c(f.references[2].resolved).to.be.equal(f.variables[2]);c(f.references[3].identifier.name).to.be.equal("obj");c(f.references[3].resolved).to.be.equal(g.variables[2]);c(f.references[4].identifier.name).to.be.equal("i");c(f.references[4].resolved).to.be.equal(f.variables[0]);c(f.references[5].identifier.name).to.be.equal("okok");c(f.references[5].resolved).to.be["null"];c(f.references[6].identifier.name).to.be.equal("i");c(f.references[6].resolved).to.be.equal(f.variables[0]);f=h.scopes[3];c(f.type).to.be.equal("block");c(f.variables).to.have.length(0);c(f.references).to.have.length(4);c(f.references[0].identifier.name).to.be.equal("console");c(f.references[0].resolved).to.be["null"];c(f.references[1].identifier.name).to.be.equal("i");c(f.references[1].resolved).to.be.equal(e.variables[0]);c(f.references[2].identifier.name).to.be.equal("j");c(f.references[2].resolved).to.be.equal(e.variables[1]);c(f.references[3].identifier.name).to.be.equal("k");return c(f.references[3].resolved).to.be.equal(e.variables[2])})})}).call(this);