var Buffer=require("buffer").Buffer;var fs=require("fs");var test=require("tape");var http=require("../..");test("abort before response",function(a){var b=http.get("/basic.txt",function(c){a.fail("unexpected response")});b.abort();a.end()});test("abort on response",function(a){var b=http.get("/basic.txt",function(c){b.abort();a.end();c.on("end",function(){a.fail("unexpected end")});c.on("data",function(d){a.fail("unexpected data")})})});test("abort on data",function(a){var b=http.get("/browserify.png?copies=5",function(c){var d=true;var e=false;c.on("end",function(){a.fail("unexpected end")});c.on("data",function(f){if(e){a.fail("unexpected data")}else{if(d){d=false;b.abort();a.end();process.nextTick(function(){e=true})}}})})});