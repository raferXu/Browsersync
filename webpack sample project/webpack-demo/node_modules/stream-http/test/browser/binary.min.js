var Buffer=require("buffer").Buffer;var fs=require("fs");var test=require("tape");var UAParser=require("ua-parser-js");var http=require("../..");var browser=(new UAParser()).setUA(navigator.userAgent).getBrowser();var browserName=browser.name;var browserVersion=browser.major;var skipVerification=(browserName==="IE"&&browserVersion<=8);var reference=fs.readFileSync(__dirname+"/../server/static/browserify.png");test("binary download",function(a){http.get("/browserify.png",function(c){var b=[];c.on("end",function(){if(skipVerification){a.skip("binary data not preserved on IE <= 8")}else{a.ok(reference.equals(Buffer.concat(b)),"contents match")}a.end()});c.on("data",function(d){b.push(d)})})});