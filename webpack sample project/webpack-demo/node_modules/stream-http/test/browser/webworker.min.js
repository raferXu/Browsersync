var fs=require("fs");var test=require("tape");var UAParser=require("ua-parser-js");var url=require("url");var work=require("webworkify");var browser=(new UAParser()).setUA(navigator.userAgent).getBrowser();var browserName=browser.name;var browserVersion=browser.major;var skip=((browserName==="Opera"&&browserVersion<=12)||(browserName==="IE"&&browserVersion<=10)||(browserName==="Safari"&&browserVersion<=5)||(browserName==="WebKit"&&browserVersion<=534)||(browserName==="Android Browser"&&browserVersion<=4));var reference=fs.readFileSync(__dirname+"/../server/static/browserify.png");test("binary download in WebWorker",{skip:skip},function(a){var c=url.resolve(global.location.href,"/browserify.png");var b=work(require("./lib/webworker-worker.js"));b.addEventListener("message",function(d){var e=new Buffer(new Uint8Array(d.data));a.ok(reference.equals(e),"contents match");a.end()});b.postMessage(c)});