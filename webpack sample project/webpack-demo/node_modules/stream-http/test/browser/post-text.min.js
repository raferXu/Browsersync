var Buffer=require("buffer").Buffer;var fs=require("fs");var test=require("tape");var http=require("../..");var reference=fs.readFileSync(__dirname+"/../server/static/basic.txt");test("post text",function(a){var b=http.request({path:"/echo",method:"POST"},function(d){var c=[];d.on("end",function(){a.ok(reference.equals(Buffer.concat(c)),"echoed contents match");a.end()});d.on("data",function(e){c.push(e)})});b.write(reference);b.end()});test("post text with data in end()",function(a){var b=http.request({path:"/echo",method:"POST"},function(d){var c=[];d.on("end",function(){a.ok(reference.equals(Buffer.concat(c)),"echoed contents match");a.end()});d.on("data",function(e){c.push(e)})});b.end(reference)});