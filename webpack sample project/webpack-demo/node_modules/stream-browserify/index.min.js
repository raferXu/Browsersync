module.exports=Stream;var EE=require("events").EventEmitter;var inherits=require("inherits");inherits(Stream,EE);Stream.Readable=require("readable-stream/readable.js");Stream.Writable=require("readable-stream/writable.js");Stream.Duplex=require("readable-stream/duplex.js");Stream.Transform=require("readable-stream/transform.js");Stream.PassThrough=require("readable-stream/passthrough.js");Stream.Stream=Stream;function Stream(){EE.call(this)}Stream.prototype.pipe=function(f,j){var a=this;function g(k){if(f.writable){if(false===f.write(k)&&a.pause){a.pause()}}}a.on("data",g);function c(){if(a.readable&&a.resume){a.resume()}}f.on("drain",c);if(!f._isStdio&&(!j||j.end!==false)){a.on("end",i);a.on("close",h)}var d=false;function i(){if(d){return}d=true;f.end()}function h(){if(d){return}d=true;if(typeof f.destroy==="function"){f.destroy()}}function e(k){b();if(EE.listenerCount(this,"error")===0){throw k}}a.on("error",e);f.on("error",e);function b(){a.removeListener("data",g);f.removeListener("drain",c);a.removeListener("end",i);a.removeListener("close",h);a.removeListener("error",e);f.removeListener("error",e);a.removeListener("end",b);a.removeListener("close",b);f.removeListener("close",b)}a.on("end",b);a.on("close",b);f.on("close",b);f.emit("pipe",a);return f};