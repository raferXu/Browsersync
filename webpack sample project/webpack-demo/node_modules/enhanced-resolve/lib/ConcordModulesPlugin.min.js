var concord=require("./concord");var DescriptionFileUtils=require("./DescriptionFileUtils");var createInnerCallback=require("./createInnerCallback");var getInnerRequest=require("./getInnerRequest");function ConcordModulesPlugin(b,a,c){this.source=b;this.options=a;this.target=c}module.exports=ConcordModulesPlugin;ConcordModulesPlugin.prototype.apply=function(b){var a=this.target;b.plugin(this.source,function(e,i){var h=getInnerRequest(b,e);if(!h){return i()}var d=DescriptionFileUtils.getField(e.descriptionFileData,"concord");if(!d){return i()}var f=concord.matchModule(e.context,d,h);if(f===h){return i()}if(f===undefined){return i()}if(f===false){var c=Object.assign({},e,{path:false});return i(null,c)}var g=Object.assign({},e,{path:e.descriptionFileRoot,request:f});b.doResolve(a,g,"aliased from description file "+e.descriptionFilePath+" with mapping '"+h+"' to '"+f+"'",createInnerCallback(function(k,j){if(arguments.length>0){return i(k,j)}i(null,null)},i))})};