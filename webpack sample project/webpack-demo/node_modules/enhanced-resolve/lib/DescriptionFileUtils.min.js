var forEachBail=require("./forEachBail");function loadDescriptionFile(d,a,b,e){(function c(){forEachBail(b,function(h,i){var f=d.join(a,h);if(d.fileSystem.readJson){d.fileSystem.readJson(f,function(k,j){if(k){if(typeof k.code!=="undefined"){return i()}return g(k)}g(null,j)})}else{d.fileSystem.readFile(f,function(l,k){if(l){return i()}try{var j=JSON.parse(k)}catch(m){g(m)}g(null,j)})}function g(k,j){if(k){if(i.log){i.log(f+" (directory description file): "+k)}else{k.message=f+" (directory description file): "+k}return i(k)}i(null,{content:j,directory:a,path:f})}},function(g,f){if(g){return e(g)}if(f){return e(null,f)}else{a=cdUp(a);if(!a){return e()}else{return c()}}})}())}function getField(b,d){if(!b){return undefined}if(Array.isArray(d)){var c=b;for(var a=0;a<d.length;a++){if(c===null||typeof c!=="object"){c=null;break}c=c[d[a]]}if(typeof c==="object"){return c}}else{if(typeof b[d]==="object"){return b[d]}}}function cdUp(a){if(a==="/"){return null}var c=a.lastIndexOf("/"),b=a.lastIndexOf("\\");var d=c<0?b:b<0?c:c<b?b:c;if(d<0){return null}return a.substr(0,d||1)}exports.loadDescriptionFile=loadDescriptionFile;exports.getField=getField;exports.cdUp=cdUp;