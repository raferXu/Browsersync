var createInnerCallback=require("./createInnerCallback");var forEachBail=require("./forEachBail");var getPaths=require("./getPaths");function ModulesInHierachicDirectoriesPlugin(a,c,b){this.source=a;this.directories=[].concat(c);this.target=b}module.exports=ModulesInHierachicDirectoriesPlugin;ModulesInHierachicDirectoriesPlugin.prototype.apply=function(c){var b=this.directories;var a=this.target;c.plugin(this.source,function(g,h){var d=this.fileSystem;var e=h;var f=getPaths(g.path).paths.map(function(i){return b.map(function(j){return this.join(i,j)},this)},this).reduce(function(j,i){j.push.apply(j,i);return j},[]);forEachBail(f,function(j,i){d.stat(j,function(m,k){if(!m&&k&&k.isDirectory()){var n=Object.assign({},g,{path:j,request:"./"+g.request});var l="looking for modules in "+j;return c.doResolve(a,n,l,createInnerCallback(i,e))}if(e.log){e.log(j+" doesn't exist or is not a directory")}if(e.missing){e.missing.push(j)}return i()})},h)})};