var Stream=require("stream").Stream;module.exports=legacy;function legacy(a){return{ReadStream:b,WriteStream:c};function b(j,f){if(!(this instanceof b)){return new b(j,f)}Stream.call(this);var d=this;this.path=j;this.fd=null;this.readable=true;this.paused=false;this.flags="r";this.mode=438;this.bufferSize=64*1024;f=f||{};var i=Object.keys(f);for(var e=0,h=i.length;e<h;e++){var g=i[e];this[g]=f[g]}if(this.encoding){this.setEncoding(this.encoding)}if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.end===undefined){this.end=Infinity}else{if("number"!==typeof this.end){throw TypeError("end must be a Number")}}if(this.start>this.end){throw new Error("start must be <= end")}this.pos=this.start}if(this.fd!==null){process.nextTick(function(){d._read()});return}a.open(this.path,this.flags,this.mode,function(l,k){if(l){d.emit("error",l);d.readable=false;return}d.fd=k;d.emit("open",k);d._read()})}function c(i,e){if(!(this instanceof c)){return new c(i,e)}Stream.call(this);this.path=i;this.fd=null;this.writable=true;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;e=e||{};var h=Object.keys(e);for(var d=0,g=h.length;d<g;d++){var f=h[d];this[f]=e[f]}if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.start<0){throw new Error("start must be >= zero")}this.pos=this.start}this.busy=false;this._queue=[];if(this.fd===null){this._open=a.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush()}}};