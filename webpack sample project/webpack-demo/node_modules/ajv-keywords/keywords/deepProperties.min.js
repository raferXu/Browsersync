"use strict";var util=require("./_util");module.exports=function defFunc(a){defFunc.definition={type:"object",macro:function(c){var b=[];for(var d in c){b.push(getSchema(d,c[d]))}return{allOf:b}},metaSchema:{type:"object",propertyNames:{type:"string",format:"json-pointer"},additionalProperties:util.metaSchemaRef(a)}};a.addKeyword("deepProperties",defFunc.definition);return a};function getSchema(j,b){var f=j.split("/");var e={};var a=e;for(var d=1;d<f.length;d++){var g=f[d];var c=d==f.length-1;g=unescapeJsonPointer(g);var l=a.properties={};var k=undefined;if(/[0-9]+/.test(g)){var h=+g;k=a.items=[];while(h--){k.push({})}}a=c?b:{};l[g]=a;if(k){k.push(a)}}return e}function unescapeJsonPointer(a){return a.replace(/~1/g,"/").replace(/~0/g,"~")};