"use strict";var stripAnsi=require("strip-ansi");var codePointAt=require("code-point-at");var isFullwidthCodePoint=require("is-fullwidth-code-point");module.exports=function(d){if(typeof d!=="string"||d.length===0){return 0}var b=0;d=stripAnsi(d);for(var a=0;a<d.length;a++){var c=codePointAt(d,a);if(c<=31||(c>=127&&c<=159)){continue}if(c>=65536){a++}if(isFullwidthCodePoint(c)){b+=2}else{b++}}return b};