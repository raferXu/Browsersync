"use strict";var stringWidth=require("string-width");var stripAnsi=require("strip-ansi");var ESCAPES=["\u001b","\u009b"];var END_CODE=39;var ESCAPE_CODES={0:0,1:22,2:22,3:23,4:24,7:27,8:28,9:29,30:39,31:39,32:39,33:39,34:39,35:39,36:39,37:39,90:39,40:49,41:49,42:49,43:49,44:49,45:49,46:49,47:49};function wrapAnsi(a){return ESCAPES[0]+"["+a+"m"}function wordLengths(a){return a.split(" ").map(function(b){return stringWidth(b)})}function wrapWord(d,f,e){var c=false;var g=stripAnsi(d[d.length-1]).length;for(var b=0;b<f.length;b++){var a=f[b];d[d.length-1]+=a;if(ESCAPES.indexOf(a)!==-1){c=true}else{if(c&&a==="m"){c=false;continue}}if(c){continue}g++;if(g>=e&&b<f.length-1){d.push("");g=0}}if(!g&&d[d.length-1].length>0&&d.length>1){d[d.length-2]+=d.pop()}}function exec(n,p,a){var r=a||{};var g="";var l="";var b;var f=wordLengths(n);var m=n.split(" ");var q=[""];for(var k=0,c;(c=m[k])!==undefined;k++){var e=stringWidth(q[q.length-1]);if(e){q[q.length-1]+=" ";e++}if(f[k]>p&&r.hard){if(e){q.push("")}wrapWord(q,c,p);continue}if(e+f[k]>p&&e>0){if(r.wordWrap===false&&e<p){wrapWord(q,c,p);continue}q.push("")}q[q.length-1]+=c}g=q.map(function(i){return i.trim()}).join("\n");for(var h=0;h<g.length;h++){var o=g[h];l+=o;if(ESCAPES.indexOf(o)!==-1){var d=parseFloat(/[0-9][^m]*/.exec(g.slice(h,h+4)));b=d===END_CODE?null:d}if(b&&ESCAPE_CODES[b]){if(g[h+1]==="\n"){l+=wrapAnsi(ESCAPE_CODES[b])}else{if(o==="\n"){l+=wrapAnsi(b)}}}}return l}module.exports=function(c,b,a){return String(c).split("\n").map(function(d){return exec(d,b,a)}).join("\n")};