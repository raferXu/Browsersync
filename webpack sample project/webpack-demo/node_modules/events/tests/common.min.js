var assert=require("assert");var mustCallChecks=[];function runCallChecks(){var a=0;for(var c=0;c<mustCallChecks.length;++c){var b=mustCallChecks[c];if(b.actual===b.expected){continue}a++;console.log("Mismatched %s function calls. Expected %d, actual %d.",b.name,b.expected,b.actual);console.log(b.stack.split("\n").slice(2).join("\n"))}assert(a===0)}after(runCallChecks);exports.mustCall=function(b,c){if(typeof c!=="number"){c=1}var a={expected:c,actual:0,stack:(new Error).stack,name:b.name||"<anonymous>"};mustCallChecks.push(a);return function(){a.actual++;return b.apply(this,arguments)}};