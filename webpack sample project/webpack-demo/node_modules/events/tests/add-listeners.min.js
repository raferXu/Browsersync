var assert=require("assert");var events=require("../");var e=new events.EventEmitter();var events_new_listener_emited=[];var listeners_new_listener_emited=[];var times_hello_emited=0;assert.equal(e.addListener,e.on);e.on("newListener",function(a,b){console.log("newListener: "+a);events_new_listener_emited.push(a);listeners_new_listener_emited.push(b)});function hello(d,c){console.log("hello");times_hello_emited+=1;assert.equal("a",d);assert.equal("b",c)}e.on("hello",hello);var foo=function(){};e.once("foo",foo);console.log("start");e.emit("hello","a","b");var f=new events.EventEmitter();f.setMaxListeners(0);assert.deepEqual(["hello","foo"],events_new_listener_emited);assert.deepEqual([hello,foo],listeners_new_listener_emited);assert.equal(1,times_hello_emited);