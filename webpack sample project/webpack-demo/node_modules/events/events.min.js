function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(a){if(!isNumber(a)||a<0||isNaN(a)){throw TypeError("n must be a positive number")}this._maxListeners=a;return this};EventEmitter.prototype.emit=function(f){var h,e,a,b,c,d;if(!this._events){this._events={}}if(f==="error"){if(!this._events.error||(isObject(this._events.error)&&!this._events.error.length)){h=arguments[1];if(h instanceof Error){throw h}else{var g=new Error('Uncaught, unspecified "error" event. ('+h+")");g.context=h;throw g}}}e=this._events[f];if(isUndefined(e)){return false}if(isFunction(e)){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:b=Array.prototype.slice.call(arguments,1);e.apply(this,b)}}else{if(isObject(e)){b=Array.prototype.slice.call(arguments,1);d=e.slice();a=d.length;for(c=0;c<a;c++){d[c].apply(this,b)}}}return true};EventEmitter.prototype.addListener=function(b,c){var a;if(!isFunction(c)){throw TypeError("listener must be a function")}if(!this._events){this._events={}}if(this._events.newListener){this.emit("newListener",b,isFunction(c.listener)?c.listener:c)}if(!this._events[b]){this._events[b]=c}else{if(isObject(this._events[b])){this._events[b].push(c)}else{this._events[b]=[this._events[b],c]}}if(isObject(this._events[b])&&!this._events[b].warned){if(!isUndefined(this._maxListeners)){a=this._maxListeners}else{a=EventEmitter.defaultMaxListeners}if(a&&a>0&&this._events[b].length>a){this._events[b].warned=true;console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[b].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(a,c){if(!isFunction(c)){throw TypeError("listener must be a function")}var d=false;function b(){this.removeListener(a,b);if(!d){d=true;c.apply(this,arguments)}}b.listener=c;this.on(a,b);return this};EventEmitter.prototype.removeListener=function(c,f){var e,a,d,b;if(!isFunction(f)){throw TypeError("listener must be a function")}if(!this._events||!this._events[c]){return this}e=this._events[c];d=e.length;a=-1;if(e===f||(isFunction(e.listener)&&e.listener===f)){delete this._events[c];if(this._events.removeListener){this.emit("removeListener",c,f)}}else{if(isObject(e)){for(b=d;b-->0;){if(e[b]===f||(e[b].listener&&e[b].listener===f)){a=b;break}}if(a<0){return this}if(e.length===1){e.length=0;delete this._events[c]}else{e.splice(a,1)}if(this._events.removeListener){this.emit("removeListener",c,f)}}}return this};EventEmitter.prototype.removeAllListeners=function(c){var a,b;if(!this._events){return this}if(!this._events.removeListener){if(arguments.length===0){this._events={}}else{if(this._events[c]){delete this._events[c]}}return this}if(arguments.length===0){for(a in this._events){if(a==="removeListener"){continue}this.removeAllListeners(a)}this.removeAllListeners("removeListener");this._events={};return this}b=this._events[c];if(isFunction(b)){this.removeListener(c,b)}else{if(b){while(b.length){this.removeListener(c,b[b.length-1])}}}delete this._events[c];return this};EventEmitter.prototype.listeners=function(b){var a;if(!this._events||!this._events[b]){a=[]}else{if(isFunction(this._events[b])){a=[this._events[b]]}else{a=this._events[b].slice()}}return a};EventEmitter.prototype.listenerCount=function(a){if(this._events){var b=this._events[a];if(isFunction(b)){return 1}else{if(b){return b.length}}}return 0};EventEmitter.listenerCount=function(b,a){return b.listenerCount(a)};function isFunction(a){return typeof a==="function"}function isNumber(a){return typeof a==="number"}function isObject(a){return typeof a==="object"&&a!==null}function isUndefined(a){return a===void 0};