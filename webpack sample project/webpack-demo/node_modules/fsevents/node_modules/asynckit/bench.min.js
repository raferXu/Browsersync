var asynckit=require("./"),async=require("async"),assert=require("assert"),expected=0;var Benchmark=require("benchmark");var suite=new Benchmark.Suite;var source=[];for(var z=1;z<100;z++){source.push(z);expected+=z}suite.add("async.map",function(a){var b=0;async.map(source,function(d,c){setImmediate(function(){b+=d;c(null,b)})},function(d,c){assert.ifError(d);assert.equal(c[c.length-1],expected);a.resolve()})},{defer:true}).add("asynckit.parallel",function(a){var b=0;asynckit.parallel(source,function(d,c){setImmediate(function(){b+=d;c(null,b)})},function(d,c){assert.ifError(d);assert.equal(c[c.length-1],expected);a.resolve()})},{defer:true}).on("cycle",function(a){console.log(String(a.target))}).on("complete",function(){console.log("Fastest is "+this.filter("fastest").map("name"))}).run({async:true});