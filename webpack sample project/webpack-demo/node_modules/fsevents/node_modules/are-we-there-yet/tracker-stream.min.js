"use strict";var util=require("util");var stream=require("readable-stream");var delegate=require("delegates");var Tracker=require("./tracker.js");var TrackerStream=module.exports=function(b,c,a){stream.Transform.call(this,a);this.tracker=new Tracker(b,c);this.name=b;this.id=this.tracker.id;this.tracker.on("change",delegateChange(this))};util.inherits(TrackerStream,stream.Transform);function delegateChange(a){return function(c,b,d){a.emit("change",c,b,a)}}TrackerStream.prototype._transform=function(c,b,a){this.tracker.completeWork(c.length?c.length:1);this.push(c);a()};TrackerStream.prototype._flush=function(a){this.tracker.finish();a()};delegate(TrackerStream.prototype,"tracker").method("completed").method("addWork");