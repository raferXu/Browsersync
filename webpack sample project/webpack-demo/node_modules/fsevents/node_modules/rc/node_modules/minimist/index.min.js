module.exports=function(e,l){if(!l){l={}}var g={bools:{},strings:{},unknownFn:null};if(typeof l.unknown==="function"){g.unknownFn=l.unknown}if(typeof l["boolean"]==="boolean"&&l["boolean"]){g.allBools=true}else{[].concat(l["boolean"]).filter(Boolean).forEach(function(i){g.bools[i]=true})}var u={};Object.keys(l.alias||{}).forEach(function(i){u[i]=[].concat(l.alias[i]);u[i].forEach(function(j){u[j]=[i].concat(u[i].filter(function(m){return j!==m}))})});[].concat(l.string).filter(Boolean).forEach(function(i){g.strings[i]=true;if(u[i]){g.strings[u[i]]=true}});var k=l["default"]||{};var c={_:[]};Object.keys(g.bools).forEach(function(i){h(i,k[i]===undefined?false:k[i])});var d=[];if(e.indexOf("--")!==-1){d=e.slice(e.indexOf("--")+1);e=e.slice(0,e.indexOf("--"))}function n(j,i){return(g.allBools&&/^--[^=]+$/.test(i))||g.strings[j]||g.bools[j]||u[j]}function h(j,x,i){if(i&&g.unknownFn&&!n(j,i)){if(g.unknownFn(i)===false){return}}var m=!g.strings[j]&&isNumber(x)?Number(x):x;a(c,j.split("."),m);(u[j]||[]).forEach(function(y){a(c,y.split("."),m)})}function a(x,j,m){var y=x;j.slice(0,-1).forEach(function(z){if(y[z]===undefined){y[z]={}}y=y[z]});var i=j[j.length-1];if(y[i]===undefined||g.bools[i]||typeof y[i]==="boolean"){y[i]=m}else{if(Array.isArray(y[i])){y[i].push(m)}else{y[i]=[y[i],m]}}}function r(i){return u[i].some(function(j){return g.bools[j]})}for(var t=0;t<e.length;t++){var f=e[t];if(/^--.+=/.test(f)){var q=f.match(/^--([^=]+)=([\s\S]*)$/);var w=q[1];var p=q[2];if(g.bools[w]){p=p!=="false"}h(w,p,f)}else{if(/^--no-.+/.test(f)){var w=f.match(/^--no-(.+)/)[1];h(w,false,f)}else{if(/^--.+/.test(f)){var w=f.match(/^--(.+)/)[1];var o=e[t+1];if(o!==undefined&&!/^-/.test(o)&&!g.bools[w]&&!g.allBools&&(u[w]?!r(w):true)){h(w,o,f);t++}else{if(/^(true|false)$/.test(o)){h(w,o==="true",f);t++}else{h(w,g.strings[w]?"":true,f)}}}else{if(/^-[^-]+/.test(f)){var v=f.slice(1,-1).split("");var b=false;for(var s=0;s<v.length;s++){var o=f.slice(s+2);if(o==="-"){h(v[s],o,f);continue}if(/[A-Za-z]/.test(v[s])&&/=/.test(o)){h(v[s],o.split("=")[1],f);b=true;break}if(/[A-Za-z]/.test(v[s])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(o)){h(v[s],o,f);b=true;break}if(v[s+1]&&v[s+1].match(/\W/)){h(v[s],f.slice(s+2),f);b=true;break}else{h(v[s],g.strings[v[s]]?"":true,f)}}var w=f.slice(-1)[0];if(!b&&w!=="-"){if(e[t+1]&&!/^(-|--)[^-]/.test(e[t+1])&&!g.bools[w]&&(u[w]?!r(w):true)){h(w,e[t+1],f);t++}else{if(e[t+1]&&/true|false/.test(e[t+1])){h(w,e[t+1]==="true",f);t++}else{h(w,g.strings[w]?"":true,f)}}}}else{if(!g.unknownFn||g.unknownFn(f)!==false){c._.push(g.strings._||!isNumber(f)?f:Number(f))}if(l.stopEarly){c._.push.apply(c._,e.slice(t+1));break}}}}}}Object.keys(k).forEach(function(i){if(!hasKey(c,i.split("."))){a(c,i.split("."),k[i]);(u[i]||[]).forEach(function(j){a(c,j.split("."),k[i])})}});if(l["--"]){c["--"]=new Array();d.forEach(function(i){c["--"].push(i)})}else{d.forEach(function(i){c._.push(i)})}return c};function hasKey(c,b){var d=c;b.slice(0,-1).forEach(function(e){d=(d[e]||{})});var a=b[b.length-1];return a in d}function isNumber(a){if(typeof a==="number"){return true}if(/^0x[0-9a-f]+$/i.test(a)){return true}return/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(a)};