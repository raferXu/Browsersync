"use strict";var extend=require("extend"),cookies=require("./lib/cookies"),helpers=require("./lib/helpers");var paramsHaveRequestBody=helpers.paramsHaveRequestBody;function initParams(b,a,d){if(typeof a==="function"){d=a}var c={};if(typeof a==="object"){extend(c,a,{uri:b})}else{if(typeof b==="string"){extend(c,{uri:b})}else{extend(c,b)}}c.callback=d||c.callback;return c}function request(b,a,d){if(typeof b==="undefined"){throw new Error("undefined is not a valid uri or options object.")}var c=initParams(b,a,d);if(c.method==="HEAD"&&paramsHaveRequestBody(c)){throw new Error("HTTP HEAD requests MUST NOT include a request body.")}return new request.Request(c)}function verbFunc(a){var b=a.toUpperCase();return function(d,c,f){var e=initParams(d,c,f);e.method=b;return request(e,e.callback)}}request.get=verbFunc("get");request.head=verbFunc("head");request.post=verbFunc("post");request.put=verbFunc("put");request.patch=verbFunc("patch");request.del=verbFunc("delete");request["delete"]=verbFunc("delete");request.jar=function(a){return cookies.jar(a)};request.cookie=function(a){return cookies.parse(a)};function wrapRequestMethod(d,a,b,c){return function(f,e,i){var h=initParams(f,e,i);var g={};extend(true,g,a,h);g.pool=h.pool||a.pool;if(c){g.method=c.toUpperCase()}if(typeof b==="function"){d=b}return d(g,g.callback)}}request.defaults=function(b,c){var a=this;b=b||{};if(typeof b==="function"){c=b;b={}}var e=wrapRequestMethod(a,b,c);var d=["get","head","post","put","patch","del","delete"];d.forEach(function(f){e[f]=wrapRequestMethod(a[f],b,c,f)});e.cookie=wrapRequestMethod(a.cookie,b,c);e.jar=a.jar;e.defaults=a.defaults;return e};request.forever=function(b,c){var a={};if(c){extend(a,c)}if(b){a.agentOptions=b}a.forever=true;return request.defaults(a)};module.exports=request;request.Request=require("./request");request.initParams=initParams;Object.defineProperty(request,"debug",{enumerable:true,get:function(){return request.Request.debug},set:function(a){request.Request.debug=a}});