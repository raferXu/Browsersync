"use strict";function formatHostname(a){return a.replace(/^\.*/,".").toLowerCase()}function parseNoProxyZone(a){a=a.trim().toLowerCase();var b=a.split(":",2),e=formatHostname(b[0]),c=b[1],d=a.indexOf(":")>-1;return{hostname:e,port:c,hasPort:d}}function uriInNoProxy(d,c){var b=d.port||(d.protocol==="https:"?"443":"80"),a=formatHostname(d.hostname),e=c.split(",");return e.map(parseNoProxyZone).some(function(h){var g=a.indexOf(h.hostname),f=(g>-1&&(g===a.length-h.hostname.length));if(h.hasPort){return(b===h.port)&&f}return f})}function getProxyFromURI(b){var a=process.env.NO_PROXY||process.env.no_proxy||"";if(a==="*"){return null}if(a!==""&&uriInNoProxy(b,a)){return null}if(b.protocol==="http:"){return process.env.HTTP_PROXY||process.env.http_proxy||null}if(b.protocol==="https:"){return process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy||null}return null}module.exports=getProxyFromURI;