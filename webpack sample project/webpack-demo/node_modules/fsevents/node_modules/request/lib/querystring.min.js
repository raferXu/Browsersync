"use strict";var qs=require("qs"),querystring=require("querystring");function Querystring(a){this.request=a;this.lib=null;this.useQuerystring=null;this.parseOptions=null;this.stringifyOptions=null}Querystring.prototype.init=function(a){if(this.lib){return}this.useQuerystring=a.useQuerystring;this.lib=(this.useQuerystring?querystring:qs);this.parseOptions=a.qsParseOptions||{};this.stringifyOptions=a.qsStringifyOptions||{}};Querystring.prototype.stringify=function(a){return(this.useQuerystring)?this.rfc3986(this.lib.stringify(a,this.stringifyOptions.sep||null,this.stringifyOptions.eq||null,this.stringifyOptions)):this.lib.stringify(a,this.stringifyOptions)};Querystring.prototype.parse=function(a){return(this.useQuerystring)?this.lib.parse(a,this.parseOptions.sep||null,this.parseOptions.eq||null,this.parseOptions):this.lib.parse(a,this.parseOptions)};Querystring.prototype.rfc3986=function(a){return a.replace(/[!'()*]/g,function(b){return"%"+b.charCodeAt(0).toString(16).toUpperCase()})};Querystring.prototype.unescape=querystring.unescape;exports.Querystring=Querystring;