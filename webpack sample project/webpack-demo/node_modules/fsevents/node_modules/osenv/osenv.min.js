var isWindows=process.platform==="win32";var path=require("path");var exec=require("child_process").exec;var osTmpdir=require("os-tmpdir");var osHomedir=require("os-homedir");function memo(c,d,e){var a=false;var b=false;exports[c]=function(f){var g=d();if(!g&&!a&&!b&&e){a=true;b=true;exec(e,function(j,h,i){b=false;if(j){return}g=h.trim()})}exports[c]=function(h){if(h){process.nextTick(h.bind(null,null,g))}return g};if(f&&!b){process.nextTick(f.bind(null,null,g))}return g}}memo("user",function(){return(isWindows?process.env.USERDOMAIN+"\\"+process.env.USERNAME:process.env.USER)},"whoami");memo("prompt",function(){return isWindows?process.env.PROMPT:process.env.PS1});memo("hostname",function(){return isWindows?process.env.COMPUTERNAME:process.env.HOSTNAME},"hostname");memo("tmpdir",function(){return osTmpdir()});memo("home",function(){return osHomedir()});memo("path",function(){return(process.env.PATH||process.env.Path||process.env.path).split(isWindows?";":":")});memo("editor",function(){return process.env.EDITOR||process.env.VISUAL||(isWindows?"notepad.exe":"vi")});memo("shell",function(){return isWindows?process.env.ComSpec||"cmd":process.env.SHELL||"bash"});