"use strict";module.exports=exports=configure;exports.usage="Attempts to configure node-gyp or nw-gyp build";var compile=require("./util/compile.js");var handle_gyp_opts=require("./util/handle_gyp_opts.js");function configure(b,a,c){handle_gyp_opts(b,a,function(f,d){var h=d.gyp.concat(d.pre);var e=["dist-url","python","nodedir","msvs_version"];e.forEach(function(i){var j=b.opts[i]||b.opts[i.replace("-","_")];if(j){h.push("--"+i+"="+j)}});if(b.opts.ensure===false){var g=h.concat(["install","--ensure=false"]);compile.run_gyp(g,d.opts,function(i){if(i){return c(i)}if(d.unparsed.length>0){h=h.concat(["--"]).concat(d.unparsed)}compile.run_gyp(["configure"].concat(h),d.opts,function(j){return c(j)})})}else{if(d.unparsed.length>0){h=h.concat(["--"]).concat(d.unparsed)}compile.run_gyp(["configure"].concat(h),d.opts,function(i){return c(i)})}})};