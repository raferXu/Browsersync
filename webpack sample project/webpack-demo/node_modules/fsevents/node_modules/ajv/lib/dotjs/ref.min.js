"use strict";module.exports=function generate_ref(h,l){var q=" ";var w=h.level;var i=h.dataLevel;var r=h.schema[l];var m=h.errSchemaPath+"/"+l;var k=!h.opts.allErrors;var d="data"+(i||"");var e="valid"+w;var s,c;if(r=="#"||r=="#/"){if(h.isRoot){s=h.async;c="validate"}else{s=h.root.schema.$async===true;c="root.refVal[0]"}}else{var v=h.resolveRef(h.baseId,r,h.isRoot);if(v===undefined){var u="can't resolve reference "+r+" from id "+h.baseId;if(h.opts.missingRefs=="fail"){console.log(u);var p=p||[];p.push(q);q="";if(h.createErrors!==false){q+=" { keyword: '"+("$ref")+"' , dataPath: (dataPath || '') + "+(h.errorPath)+" , schemaPath: "+(h.util.toQuotedString(m))+" , params: { ref: '"+(h.util.escapeQuotes(r))+"' } ";if(h.opts.messages!==false){q+=" , message: 'can\\'t resolve reference "+(h.util.escapeQuotes(r))+"' "}if(h.opts.verbose){q+=" , schema: "+(h.util.toQuotedString(r))+" , parentSchema: validate.schema"+(h.schemaPath)+" , data: "+(d)+" "}q+=" } "}else{q+=" {} "}var a=q;q=p.pop();if(!h.compositeRule&&k){if(h.async){q+=" throw new ValidationError(["+(a)+"]); "}else{q+=" validate.errors = ["+(a)+"]; return false; "}}else{q+=" var err = "+(a)+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}if(k){q+=" if (false) { "}}else{if(h.opts.missingRefs=="ignore"){console.log(u);if(k){q+=" if (true) { "}}else{var j=new Error(u);j.missingRef=h.resolve.url(h.baseId,r);j.missingSchema=h.resolve.normalizeId(h.resolve.fullPath(j.missingRef));throw j}}}else{if(v.inline){var b=h.util.copy(h);b.level++;var t="valid"+b.level;b.schema=v.schema;b.schemaPath="";b.errSchemaPath=r;var g=h.validate(b).replace(/validate\.schema/g,v.code);q+=" "+(g)+" ";if(k){q+=" if ("+(t)+") { "}}else{s=v.$async===true;c=v.code}}}if(c){var p=p||[];p.push(q);q="";if(h.opts.passContext){q+=" "+(c)+".call(this, "}else{q+=" "+(c)+"( "}q+=" "+(d)+", (dataPath || '')";if(h.errorPath!='""'){q+=" + "+(h.errorPath)}var f=i?"data"+((i-1)||""):"parentData",n=i?h.dataPathArr[i]:"parentDataProperty";q+=" , "+(f)+" , "+(n)+", rootData)  ";var o=q;q=p.pop();if(s){if(!h.async){throw new Error("async schema referenced by sync schema")}q+=" try { ";if(k){q+="var "+(e)+" ="}q+=" "+(h.yieldAwait)+" "+(o)+"; } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; } ";if(k){q+=" if ("+(e)+") { "}}else{q+=" if (!"+(o)+") { if (vErrors === null) vErrors = "+(c)+".errors; else vErrors = vErrors.concat("+(c)+".errors); errors = vErrors.length; } ";if(k){q+=" else { "}}}return q};