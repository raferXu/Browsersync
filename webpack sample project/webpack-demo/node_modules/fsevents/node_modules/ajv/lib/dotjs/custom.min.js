"use strict";module.exports=function generate_custom(r,D){var z=" ";var v=r.level;var B=r.dataLevel;var C=r.schema[D];var s=r.schemaPath+r.util.getProperty(D);var q=r.errSchemaPath+"/"+D;var A=!r.opts.allErrors;var i;var e="data"+(B||"");var k="valid"+v;var L="errs__"+v;var u=r.opts.v5&&C&&C.$data,h;if(u){z+=" var schema"+(v)+" = "+(r.util.getData(C.$data,B,r.dataPathArr))+"; ";h="schema"+v}else{h=C}var d=this,F="definition"+v,b=d.definition;var a,p,y,c,t;if(u&&b.$data){t="keywordValidate"+v;var x=b.validateSchema;z+=" var "+(F)+" = RULES.custom['"+(D)+"'].definition; var "+(t)+" = "+(F)+".validate;"}else{c=r.useCustomRule(d,C,r.schema,r);h="validate.schema"+s;t=c.code;a=b.compile;p=b.inline;y=b.macro}var n=t+".errors",f="i"+v,K="ruleErr"+v,o=b.async;if(o&&!r.async){throw new Error("async keyword in sync schema")}if(!(p||y)){z+=""+(n)+" = null;"}z+="var "+(L)+" = errors;var "+(k)+";";if(x){z+=" "+(k)+" = "+(F)+".validateSchema("+(h)+"); if ("+(k)+") {"}if(p){if(b.statements){z+=" "+(c.validate)+" "}else{z+=" "+(k)+" = "+(c.validate)+"; "}}else{if(y){var m=r.util.copy(r);m.level++;var E="valid"+m.level;m.schema=c.validate;m.schemaPath="";var w=r.compositeRule;r.compositeRule=m.compositeRule=true;var g=r.validate(m).replace(/validate\.schema/g,t);r.compositeRule=m.compositeRule=w;z+=" "+(g)}else{var I=I||[];I.push(z);z="";z+="  "+(t)+".call( ";if(r.opts.passContext){z+="this"}else{z+="self"}if(a||b.schema===false){z+=" , "+(e)+" "}else{z+=" , "+(h)+" , "+(e)+" , validate.schema"+(r.schemaPath)+" "}z+=" , (dataPath || '')";if(r.errorPath!='""'){z+=" + "+(r.errorPath)}var l=B?"data"+((B-1)||""):"parentData",G=B?r.dataPathArr[B]:"parentDataProperty";z+=" , "+(l)+" , "+(G)+" , rootData )  ";var j=z;z=I.pop();if(b.errors===false){z+=" "+(k)+" = ";if(o){z+=""+(r.yieldAwait)}z+=""+(j)+"; "}else{if(o){n="customErrors"+v;z+=" var "+(n)+" = null; try { "+(k)+" = "+(r.yieldAwait)+(j)+"; } catch (e) { "+(k)+" = false; if (e instanceof ValidationError) "+(n)+" = e.errors; else throw e; } "}else{z+=" "+(n)+" = null; "+(k)+" = "+(j)+"; "}}}}if(b.modifying){z+=" "+(e)+" = "+(l)+"["+(G)+"];"}if(x){z+=" }"}if(b.valid){if(A){z+=" if (true) { "}}else{z+=" if ( ";if(b.valid===undefined){z+=" !";if(y){z+=""+(E)}else{z+=""+(k)}}else{z+=" "+(!b.valid)+" "}z+=") { ";i=d.keyword;var I=I||[];I.push(z);z="";var I=I||[];I.push(z);z="";if(r.createErrors!==false){z+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+(r.errorPath)+" , schemaPath: "+(r.util.toQuotedString(q))+" , params: { keyword: '"+(d.keyword)+"' } ";if(r.opts.messages!==false){z+=" , message: 'should pass \""+(d.keyword)+"\" keyword validation' "}if(r.opts.verbose){z+=" , schema: validate.schema"+(s)+" , parentSchema: validate.schema"+(r.schemaPath)+" , data: "+(e)+" "}z+=" } "}else{z+=" {} "}var H=z;z=I.pop();if(!r.compositeRule&&A){if(r.async){z+=" throw new ValidationError(["+(H)+"]); "}else{z+=" validate.errors = ["+(H)+"]; return false; "}}else{z+=" var err = "+(H)+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}var J=z;z=I.pop();if(p){if(b.errors){if(b.errors!="full"){z+="  for (var "+(f)+"="+(L)+"; "+(f)+"<errors; "+(f)+"++) { var "+(K)+" = vErrors["+(f)+"]; if ("+(K)+".dataPath === undefined) "+(K)+".dataPath = (dataPath || '') + "+(r.errorPath)+"; if ("+(K)+".schemaPath === undefined) { "+(K)+'.schemaPath = "'+(q)+'"; } ';if(r.opts.verbose){z+=" "+(K)+".schema = "+(h)+"; "+(K)+".data = "+(e)+"; "}z+=" } "}}else{if(b.errors===false){z+=" "+(J)+" "}else{z+=" if ("+(L)+" == errors) { "+(J)+" } else {  for (var "+(f)+"="+(L)+"; "+(f)+"<errors; "+(f)+"++) { var "+(K)+" = vErrors["+(f)+"]; if ("+(K)+".dataPath === undefined) "+(K)+".dataPath = (dataPath || '') + "+(r.errorPath)+"; if ("+(K)+".schemaPath === undefined) { "+(K)+'.schemaPath = "'+(q)+'"; } ';if(r.opts.verbose){z+=" "+(K)+".schema = "+(h)+"; "+(K)+".data = "+(e)+"; "}z+=" } } "}}}else{if(y){z+="   var err =   ";if(r.createErrors!==false){z+=" { keyword: '"+(i||"custom")+"' , dataPath: (dataPath || '') + "+(r.errorPath)+" , schemaPath: "+(r.util.toQuotedString(q))+" , params: { keyword: '"+(d.keyword)+"' } ";if(r.opts.messages!==false){z+=" , message: 'should pass \""+(d.keyword)+"\" keyword validation' "}if(r.opts.verbose){z+=" , schema: validate.schema"+(s)+" , parentSchema: validate.schema"+(r.schemaPath)+" , data: "+(e)+" "}z+=" } "}else{z+=" {} "}z+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";if(!r.compositeRule&&A){if(r.async){z+=" throw new ValidationError(vErrors); "}else{z+=" validate.errors = vErrors; return false; "}}}else{if(b.errors===false){z+=" "+(J)+" "}else{z+=" if (Array.isArray("+(n)+")) { if (vErrors === null) vErrors = "+(n)+"; else vErrors = vErrors.concat("+(n)+"); errors = vErrors.length;  for (var "+(f)+"="+(L)+"; "+(f)+"<errors; "+(f)+"++) { var "+(K)+" = vErrors["+(f)+"]; if ("+(K)+".dataPath === undefined) "+(K)+".dataPath = (dataPath || '') + "+(r.errorPath)+";  "+(K)+'.schemaPath = "'+(q)+'";  ';if(r.opts.verbose){z+=" "+(K)+".schema = "+(h)+"; "+(K)+".data = "+(e)+"; "}z+=" } } else { "+(J)+" } "}}}z+=" } ";if(A){z+=" else { "}}return z};