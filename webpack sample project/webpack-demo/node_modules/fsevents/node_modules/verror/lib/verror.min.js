var mod_assert=require("assert");var mod_util=require("util");var mod_extsprintf=require("extsprintf");exports.VError=VError;exports.WError=WError;exports.MultiError=MultiError;function VError(b){var a,e,c,d;if(b instanceof Error||typeof(b)==="object"){a=Array.prototype.slice.call(arguments,1)}else{a=Array.prototype.slice.call(arguments,0);b=undefined}d=a.length>0?mod_extsprintf.sprintf.apply(null,a):"";this.jse_shortmsg=d;this.jse_summary=d;if(b){e=b.cause;if(!e||!(b.cause instanceof Error)){e=b}if(e&&(e instanceof Error)){this.jse_cause=e;this.jse_summary+=": "+e.message}}this.message=this.jse_summary;Error.call(this,this.jse_summary);if(Error.captureStackTrace){c=b?b.constructorOpt:undefined;c=c||arguments.callee;Error.captureStackTrace(this,c)}}mod_util.inherits(VError,Error);VError.prototype.name="VError";VError.prototype.toString=function ve_toString(){var a=(this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name);if(this.message){a+=": "+this.message}return(a)};VError.prototype.cause=function ve_cause(){return(this.jse_cause)};function MultiError(a){mod_assert.ok(a.length>0);this.ase_errors=a;VError.call(this,a[0],"first of %d error%s",a.length,a.length==1?"":"s")}mod_util.inherits(MultiError,VError);function WError(b){Error.call(this);var a,d,c;if(typeof(b)==="object"){a=Array.prototype.slice.call(arguments,1)}else{a=Array.prototype.slice.call(arguments,0);b=undefined}if(a.length>0){this.message=mod_extsprintf.sprintf.apply(null,a)}else{this.message=""}if(b){if(b instanceof Error){d=b}else{d=b.cause;c=b.constructorOpt}}Error.captureStackTrace(this,c||this.constructor);if(d){this.cause(d)}}mod_util.inherits(WError,Error);WError.prototype.name="WError";WError.prototype.toString=function we_toString(){var a=(this.hasOwnProperty("name")&&this.name||this.constructor.name||this.constructor.prototype.name);if(this.message){a+=": "+this.message}if(this.we_cause&&this.we_cause.message){a+="; caused by "+this.we_cause.toString()}return(a)};WError.prototype.cause=function we_cause(a){if(a instanceof Error){this.we_cause=a}return(this.we_cause)};