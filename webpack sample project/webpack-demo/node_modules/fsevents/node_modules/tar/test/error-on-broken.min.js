var fs=require("fs");var path=require("path");var zlib=require("zlib");var tap=require("tap");var tar=require("../tar.js");var file=path.join(__dirname,"cb-never-called-1.0.1.tgz");var target=path.join(__dirname,"tmp/extract-test");tap.test("preclean",function(a){require("rimraf").sync(__dirname+"/tmp/extract-test");a.pass("cleaned!");a.end()});tap.test("extract test",function(a){var c=tar.Extract(target);var b=fs.createReadStream(file);b.pipe(zlib.createGunzip()).pipe(c);c.on("error",function(d){a.equal(d.message,"unexpected eof","error noticed");a.end()});c.on("end",function(){a.fail("shouldn't reach this point due to errors");a.end()})});