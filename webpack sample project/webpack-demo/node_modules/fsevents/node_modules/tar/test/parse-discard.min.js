var tap=require("tap"),tar=require("../tar.js"),fs=require("fs"),path=require("path"),file=path.resolve(__dirname,"fixtures/c.tar");tap.test("parser test",function(a){var d=tar.Parse();var b=0;var c=0;d.on("end",function(){a.equals(b-513,c,"should have discarded only c.txt");a.end()});fs.createReadStream(file).pipe(d).on("entry",function(e){if(e.path==="c.txt"){e.abort()}b+=e.size;e.on("data",function(f){c+=f.length})})});