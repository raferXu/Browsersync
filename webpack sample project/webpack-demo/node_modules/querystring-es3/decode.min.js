"use strict";function hasOwnProperty(a,b){return Object.prototype.hasOwnProperty.call(a,b)}module.exports=function(f,p,o,q){p=p||"&";o=o||"=";var c={};if(typeof f!=="string"||f.length===0){return c}var e=/\+/g;f=f.split(p);var j=1000;if(q&&typeof q.maxKeys==="number"){j=q.maxKeys}var d=f.length;if(j>0&&d>j){d=j}for(var b=0;b<d;++b){var h=f[b].replace(e,"%20"),l=h.indexOf(o),g,n,a,m;if(l>=0){g=h.substr(0,l);n=h.substr(l+1)}else{g=h;n=""}a=decodeURIComponent(g);m=decodeURIComponent(n);if(!hasOwnProperty(c,a)){c[a]=m}else{if(isArray(c[a])){c[a].push(m)}else{c[a]=[c[a],m]}}}return c};var isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};