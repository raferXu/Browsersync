var SetCache=require("./_SetCache"),arrayIncludes=require("./_arrayIncludes"),arrayIncludesWith=require("./_arrayIncludesWith"),arrayMap=require("./_arrayMap"),baseUnary=require("./_baseUnary"),cacheHas=require("./_cacheHas");var LARGE_ARRAY_SIZE=200;function baseDifference(h,k,f,b){var g=-1,m=arrayIncludes,d=true,c=h.length,l=[],i=k.length;if(!c){return l}if(f){k=arrayMap(k,baseUnary(f))}if(b){m=arrayIncludesWith;d=false}else{if(k.length>=LARGE_ARRAY_SIZE){m=cacheHas;d=false;k=new SetCache(k)}}outer:while(++g<c){var j=h[g],e=f==null?j:f(j);j=(b||j!==0)?j:0;if(d&&e===e){var a=i;while(a--){if(k[a]===e){continue outer}}l.push(j)}else{if(!m(k,e,b)){l.push(j)}}}return l}module.exports=baseDifference;