var LodashWrapper=require("./_LodashWrapper"),flatRest=require("./_flatRest"),getData=require("./_getData"),getFuncName=require("./_getFuncName"),isArray=require("./isArray"),isLaziable=require("./_isLaziable");var FUNC_ERROR_TEXT="Expected a function";var WRAP_CURRY_FLAG=8,WRAP_PARTIAL_FLAG=32,WRAP_ARY_FLAG=128,WRAP_REARG_FLAG=256;function createFlow(a){return flatRest(function(c){var f=c.length,d=f,b=LodashWrapper.prototype.thru;if(a){c.reverse()}while(d--){var e=c[d];if(typeof e!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(b&&!i&&getFuncName(e)=="wrapper"){var i=new LodashWrapper([],true)}}d=i?d:f;while(++d<f){e=c[d];var h=getFuncName(e),g=h=="wrapper"?getData(e):undefined;if(g&&isLaziable(g[0])&&g[1]==(WRAP_ARY_FLAG|WRAP_CURRY_FLAG|WRAP_PARTIAL_FLAG|WRAP_REARG_FLAG)&&!g[4].length&&g[9]==1){i=i[getFuncName(g[0])].apply(i,g[3])}else{i=(e.length==1&&isLaziable(e))?i[h]():i.thru(e)}}return function(){var l=arguments,m=l[0];if(i&&l.length==1&&isArray(m)){return i.plant(m).value()}var k=0,j=f?c[k].apply(this,l):m;while(++k<f){j=c[k].call(this,j)}return j}})}module.exports=createFlow;