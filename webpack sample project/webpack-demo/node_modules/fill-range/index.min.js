/*!
 * fill-range <https://github.com/jonschlinkert/fill-range>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */
;"use strict";var isObject=require("isobject");var isNumber=require("is-number");var randomize=require("randomatic");var repeatStr=require("repeat-string");var repeat=require("repeat-element");module.exports=fillRange;function fillRange(A,z,j,e,n){if(A==null||z==null){throw new Error("fill-range expects the first and second args to be strings.")}if(typeof j==="function"){n=j;e={};j=null}if(typeof e==="function"){n=e;e={}}if(isObject(j)){e=j;j=""}var d,f=false,t="";var q=e||{};if(typeof q.silent==="undefined"){q.silent=true}j=j||q.step;var h=A,g=z;z=(z.toString()==="-0")?0:z;if(q.optimize||q.makeRe){j=j?(j+="~"):j;d=true;f=true;t="~"}if(typeof j==="string"){var l=stepRe().exec(j);if(l){var v=l.index;var u=l[0];if(u==="+"){return repeat(A,z)}else{if(u==="?"){return[randomize(A,z)]}else{if(u===">"){j=j.substr(0,v)+j.substr(v+1);d=true}else{if(u==="|"){j=j.substr(0,v)+j.substr(v+1);d=true;f=true;t=u}else{if(u==="~"){j=j.substr(0,v)+j.substr(v+1);d=true;f=true;t=u}}}}}}else{if(!isNumber(j)){if(!q.silent){throw new TypeError("fill-range: invalid step.")}return null}}}if(/[.&*()[\]^%$#@!]/.test(A)||/[.&*()[\]^%$#@!]/.test(z)){if(!q.silent){throw new RangeError("fill-range: invalid range arguments.")}return null}if(!noAlphaNum(A)||!noAlphaNum(z)||hasBoth(A)||hasBoth(z)){if(!q.silent){throw new RangeError("fill-range: invalid range arguments.")}return null}var y=isNumber(zeros(A));var x=isNumber(zeros(z));if((!y&&x)||(y&&!x)){if(!q.silent){throw new TypeError("fill-range: first range argument is incompatible with second.")}return null}var s=y;var k=formatStep(j);if(s){A=+A;z=+z}else{A=A.charCodeAt(0);z=z.charCodeAt(0)}var o=A>z;if(A<0||z<0){d=false;f=false}var r=isPadded(h,g);var B,w,c=[];var p=0;if(f){if(shouldExpand(A,z,k,s,r,q)){if(t==="|"||t==="~"){t=detectSeparator(A,z,k,s,o)}return wrap([h,g],t,q)}}while(o?(A>=z):(A<=z)){if(r&&s){w=r(A)}if(typeof n==="function"){B=n(A,s,w,p++)}else{if(!s){if(f&&isInvalidChar(A)){B=null}else{B=String.fromCharCode(A)}}else{B=formatPadding(A,w)}}if(B!==null){c.push(B)}if(o){A-=k}else{A+=k}}if((f||d)&&!q.noexpand){if(t==="|"||t==="~"){t=detectSeparator(A,z,k,s,o)}if(c.length===1||A<0||z<0){return c}return wrap(c,t,q)}return c}function wrap(a,b,c){if(b==="~"){b="-"}var e=a.join(b);var d=c&&c.regexPrefix;if(b==="|"){e=d?d+e:e;e="("+e+")"}if(b==="-"){e=(d&&d==="^")?d+e:e;e="["+e+"]"}return[e]}function isCharClass(d,c,f,g,e){if(e){return false}if(g){return d<=9&&c<=9}if(d<c){return f===1}return false}function shouldExpand(d,c,e,h,g,f){if(h&&(d>9||c>9)){return false}return !g&&e===1&&d<c}function detectSeparator(d,c,g,h,f){var e=isCharClass(d,c,g,h,f);if(!e){return"|"}return"~"}function formatStep(a){return Math.abs(a>>0)||1}function formatPadding(b,c){var a=c?c+b:b;if(c&&b.toString().charAt(0)==="-"){a="-"+c+b.toString().substr(1)}return a.toString()}function isInvalidChar(b){var a=toStr(b);return a==="\\"||a==="["||a==="]"||a==="^"||a==="("||a===")"||a==="`"}function toStr(a){return String.fromCharCode(a)}function stepRe(){return/\?|>|\||\+|\~/g}function noAlphaNum(a){return/[a-z0-9]/i.test(a)}function hasBoth(a){return/[a-z][0-9]|[0-9][a-z]/i.test(a)}function zeros(a){if(/^-*0+$/.test(a.toString())){return"0"}return a}function hasZeros(a){return/[^.]\.|^-*0+[0-9]/.test(a)}function isPadded(b,e){if(hasZeros(b)||hasZeros(e)){var d=length(b);var c=length(e);var a=d>=c?d:c;return function(f){return repeatStr("0",a-length(f))}}return false}function length(a){return a.toString().length};