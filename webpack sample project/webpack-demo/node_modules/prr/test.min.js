const test=require("tap").test,prr=require("./");test("test prr(o, key, value) form",function(a){a.plan(2);var b={};prr(b,"foo","bar");a.equal(b.foo,"bar","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo"),{enumerable:false,configurable:false,writable:false,value:"bar"},"correct property descriptor");a.end()});test("test prr(o, { key: value }) form",function(a){a.plan(2);var b={};prr(b,{foo:"bar"});a.equal(b.foo,"bar","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo"),{enumerable:false,configurable:false,writable:false,value:"bar"},"correct property descriptor");a.end()});test("test multiple key:value pairs",function(a){var b={foo:"bar"};prr(b,{one:"ONE",two:"TWO",obj:{o:"o"}});a.deepEqual(b,{foo:"bar"},"properties are not enumerable");a.equal(b.one,"ONE","correctly set property");a.equal(b.two,"TWO","correctly set property");a.deepEqual(b.obj,{o:"o"},"correctly set property");["one","two","obj"].forEach(function(c){a.deepEqual(Object.getOwnPropertyDescriptor(b,c),{enumerable:false,configurable:false,writable:false,value:c=="obj"?{o:"o"}:c.toUpperCase()},"correct property descriptor")});a.end()});test("test descriptor options",function(a){var b={};prr(b,"foo","bar",{enumerable:true,configurable:false});a.equal(b.foo,"bar","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo"),{enumerable:true,configurable:false,writable:false,value:"bar"},"correct property descriptor");prr(b,"foo2","bar2",{enumerable:true,configurable:true,writable:false});a.equal(b.foo2,"bar2","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo2"),{enumerable:true,configurable:true,writable:false,value:"bar2"},"correct property descriptor");prr(b,"foo3","bar3",{enumerable:true,configurable:true,writable:true});a.equal(b.foo3,"bar3","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo3"),{enumerable:true,configurable:true,writable:true,value:"bar3"},"correct property descriptor");a.end()});test("test descriptor options, string form",function(a){var b={};prr(b,"foo","bar","e");a.equal(b.foo,"bar","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo"),{enumerable:true,configurable:false,writable:false,value:"bar"},"correct property descriptor");prr(b,"foo2","bar2","ec");a.equal(b.foo2,"bar2","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo2"),{enumerable:true,configurable:true,writable:false,value:"bar2"},"correct property descriptor");prr(b,"foo3","bar3","ecw");a.equal(b.foo3,"bar3","correct value");a.deepEqual(Object.getOwnPropertyDescriptor(b,"foo3"),{enumerable:true,configurable:true,writable:true,value:"bar3"},"correct property descriptor");a.end()});