"use strict";module.exports=function generate_ref(i,l,b){var q=" ";var w=i.level;var j=i.dataLevel;var r=i.schema[l];var m=i.errSchemaPath+"/"+l;var k=!i.opts.allErrors;var e="data"+(j||"");var f="valid"+w;var s,d;if(r=="#"||r=="#/"){if(i.isRoot){s=i.async;d="validate"}else{s=i.root.schema.$async===true;d="root.refVal[0]"}}else{var v=i.resolveRef(i.baseId,r,i.isRoot);if(v===undefined){var u=i.MissingRefError.message(i.baseId,r);if(i.opts.missingRefs=="fail"){console.error(u);var p=p||[];p.push(q);q="";if(i.createErrors!==false){q+=" { keyword: '"+("$ref")+"' , dataPath: (dataPath || '') + "+(i.errorPath)+" , schemaPath: "+(i.util.toQuotedString(m))+" , params: { ref: '"+(i.util.escapeQuotes(r))+"' } ";if(i.opts.messages!==false){q+=" , message: 'can\\'t resolve reference "+(i.util.escapeQuotes(r))+"' "}if(i.opts.verbose){q+=" , schema: "+(i.util.toQuotedString(r))+" , parentSchema: validate.schema"+(i.schemaPath)+" , data: "+(e)+" "}q+=" } "}else{q+=" {} "}var a=q;q=p.pop();if(!i.compositeRule&&k){if(i.async){q+=" throw new ValidationError(["+(a)+"]); "}else{q+=" validate.errors = ["+(a)+"]; return false; "}}else{q+=" var err = "+(a)+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}if(k){q+=" if (false) { "}}else{if(i.opts.missingRefs=="ignore"){console.warn(u);if(k){q+=" if (true) { "}}else{throw new i.MissingRefError(i.baseId,r,u)}}}else{if(v.inline){var c=i.util.copy(i);c.level++;var t="valid"+c.level;c.schema=v.schema;c.schemaPath="";c.errSchemaPath=r;var h=i.validate(c).replace(/validate\.schema/g,v.code);q+=" "+(h)+" ";if(k){q+=" if ("+(t)+") { "}}else{s=v.$async===true;d=v.code}}}if(d){var p=p||[];p.push(q);q="";if(i.opts.passContext){q+=" "+(d)+".call(this, "}else{q+=" "+(d)+"( "}q+=" "+(e)+", (dataPath || '')";if(i.errorPath!='""'){q+=" + "+(i.errorPath)}var g=j?"data"+((j-1)||""):"parentData",n=j?i.dataPathArr[j]:"parentDataProperty";q+=" , "+(g)+" , "+(n)+", rootData)  ";var o=q;q=p.pop();if(s){if(!i.async){throw new Error("async schema referenced by sync schema")}if(k){q+=" var "+(f)+"; "}q+=" try { "+(i.yieldAwait)+" "+(o)+"; ";if(k){q+=" "+(f)+" = true; "}q+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ";if(k){q+=" "+(f)+" = false; "}q+=" } ";if(k){q+=" if ("+(f)+") { "}}else{q+=" if (!"+(o)+") { if (vErrors === null) vErrors = "+(d)+".errors; else vErrors = vErrors.concat("+(d)+".errors); errors = vErrors.length; } ";if(k){q+=" else { "}}}return q};