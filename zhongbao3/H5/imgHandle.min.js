function calc(c){var b=c.imgInitW||0;var i=c.imgInitH||0;var k=c.imgWrapW||0;var g=c.imgWrapH||0;var d=(k/b*i<g)?"h":"v";var e=1,h,a,f,j;if(d=="h"){e=k/b;a=k;h=i*e;f=(g-h)/2;j=0;console.log("水平方面撑满屏幕， 缩放倍数为"+e+"，缩放后宽度为"+a+"，高度为"+h+"，上边留白"+f+"，左边留白0")}else{e=g/i;h=g;a=b*e;j=(k-a)/2;f=0;console.log("水平方面撑满屏幕， 缩放倍数为"+e+"，缩放后宽度为"+a+"，高度为"+h+"，上边留白0，左边留白"+j)}return{fw:a,fh:h,pl:j,pt:f}}function imgCallback(c){var e=$(".billImgBox").width();var b=$(".billImgBox").height();var d=c.naturalHeight;var f=c.naturalWidth;var a=calc({imgInitW:f,imgInitH:d,imgWrapW:e,imgWrapH:b});$(".billImg").css({width:a.fw+"px",height:a.fh+"px",marginTop:a.pt+"px",marginLeft:a.pl+"px",display:"inline-block"})}function imgHandleFn(a){var d=setInterval(function(){if(imgLoaded($(".billImg")[0])){clearInterval(d);imgCallback($(".billImg")[0]);loadImg=true;if(loadImg&&getStr){console.log("图片和ajax请求均完成");$("#showMes").hide()}}},100);$(".pinch-zoom").html("").append(a.info.image);var c=parseInt($("html").css("fontSize"));var b={zoomFactor:3,offset:{x:3.75*c,y:1.1*c},maxZoom:6,tapZoomFactor:3};$("div.pinch-zoom").each(function(){new RTP.PinchZoom($(this),b)})}var imgStartX,imgStartY;$(".imgWrap").off(touchstart).on(touchstart,function(a){imgStartX=a.originalEvent.touches[0].pageX;imgStartY=a.originalEvent.touches[0].pageY});$(".imgWrap").off("touchend").on("touchend",function(d){var b=d.originalEvent.changedTouches[0].pageX;var a=d.originalEvent.changedTouches[0].pageY;var c=GetSlideDirection(imgStartX,imgStartY,b,a);switch(c){case 3:console.log("imgWrap left");d.preventDefault();break;case 4:console.log("imgWrap right");d.preventDefault();break}});