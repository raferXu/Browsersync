<!DOCTYPE>
<html>
<head>
    <title>Pinchzoom.js Demo</title>
    <link rel="stylesheet" href="style3.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes" />

    <!-- pinchzoom requires: jquery -->
    <script type="text/javascript" src="jquery-1.7.2.min.js"></script>
    <script>
        window.onload = function () {
            var get_data;
            var limitImgH = 300;
            var limitImgW = $('html').width();
            $('.pinchImgDiv').height(limitImgH).css('background','#DDD');
            //            $('.pinchImgDiv img').height(limitImgH);
            if(limitImgW/$('.pinchImgDiv img').width()*$('.pinchImgDiv img').height() < limitImgH){
                $('.pinchImgDiv img').width('100%');
                $('.pinchImgDiv img').css('padding-top',(limitImgH-$('.pinchImgDiv img').height())/2+'px');
            }else{
                $('.pinchImgDiv img').height(limitImgH);
                $('.pinchImgDiv img').css('padding-left',(limitImgW-$('.pinchImgDiv img').width())/2+'px');
            }
        };
//        $(function () {
//            var get_data;
//            var limitImgH = 300;
//            var limitImgW = $('html').width();
//            $('.pinchImgDiv').height(limitImgH).css('background','#AAA');
//            //            $('.pinchImgDiv img').height(limitImgH);
//            if(limitImgW/$('.pinchImgDiv img').width()*$('.pinchImgDiv img').height() < limitImgH){
//                $('.pinchImgDiv img').width('100%');
//            }else{
//                $('.pinchImgDiv img').height(limitImgH);
//            }
//        });
    </script>
    <script type="text/javascript" src="pinchzoom3.js"></script>
    <script type="text/javascript">
        $(function () {
            console.log('imgW: '+$('.pinchImgDiv img').width());
            console.log('imgH: '+$('.pinchImgDiv img').height());
            console.log('htmlW: '+$('html').width());
            $('div.pinch-zoom').each(function () {
                new RTP.PinchZoom($(this), {});

//                    var wContact=$('body').height()-$('.outer').height();
//                    console.log($('.content')[0].offsetHeight);
//                    var w=wContact-40;
//                    $('.submitLabel').css('margin-top',w);
            });
            //var submitData = document.getElementById('submitLabel');
            //submitData.onclick = (function(i){return function(){console.log(i);}})(data);
//                console.log('subLabMgn:'+subLabMgn);
            $(document).scroll(function () {
//                    console.log('$(this).scrollTop():'+$(this).scrollTop());
                var documentScrollTop = $(this).scrollTop();
                finalSubLabMgn = documentScrollTop + subLabMgn;
                $('#submitLabel').css('margin-top',finalSubLabMgn);
            });
//                setInterval('console.log("$(window).scrollTop()"+$(document).scrollTop())',1000);
//                setInterval('console.log("$(html).scrollTop()"+$("html").scrollTop())',1000);
//                setInterval('console.log("$(body).scrollTop()"+$("body").scrollTop())',1000);
//            console.log('img.w:'+$('img').width());
//            console.log('img.h:'+$('img').height());
//            console.log('win.h:'+$(window).height());
//            console.log('img.t:'+$('img').offset().top);

            var submitData = document.getElementById('submitLabel');
            submitData.onclick =function () {
                $('textarea.labelComment').each(function(i){
                    data.comment[i]=$(this).val();
                });
                console.log('get_data():'+ get_data());
                console.log(get_data());
                $('.subImg').html('');
                $('.subImg').css("left",0);
                $('.cutImgLabel').html('');
                $('.rect').remove();
                $('.cutMove').hide();
                $('.pinch-zoom-container').css('height','auto');
                $('.submitLabel').css({'position':'fixed','bottom':0});
            }
        });
    </script>
</head>
<body>
<!--<div class="content">-->
<h4 class="labelTitle">标注</h4>
<div class="outer">
    <div class="pinch-zoom">
        <!--<img src="http://192.168.0.88:8000/reciept/4_1/subImage_x588_y303.jpg"/>-->
        <!--<img src="http://192.168.0.88:8000/reciept/12_0/000012_roi_0.jpg"/>-->
        <div class="pinchImgDiv" style="width:100%">
            <img src="frog.jpg"/>
        </div>
    </div>
    <input type="button" class="cutMove" value="切换到截图" />
    <!--<a href="#" class="cutMove">切换到截图</a>-->
    <!--<div class="imgInitial">-->
    <!--<img src="http://192.168.0.88:8000/reciept/4_1/subImage_x588_y303.jpg" style="display: none"/>-->
    <!--</div>-->
    <ul class="subImg" id="cutImgUl"></ul>
    <div class="cutImgLabel">
    </div>
    <br><br>
</div>
<!--</div>-->
<div class="lableSubmitOuter">
    <input type="submit" class="submitLabel" id="submitLabel" value="提交标注" disabled="disabled">
</div>
</body>
</html>