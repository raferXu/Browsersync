(function(b){b.fn.addMobile=function(a){var e,f={container:{theme:"a"},buttonMarkup:{theme:"a",shadow:"true",corners:"true"},buttonHover:{theme:"c"},buttonAction:{theme:"b"},buttonActive:{theme:"e"}};return this.each(function(){var c=b(this).data("keyboard");if(!c||typeof(b.fn.textinput)==="undefined"){return}c.mobile_options=e=b.extend({},f,a);c.mobile_init=function(){b(".ui-keyboard-input").textinput();if(c.options.alwaysOpen&&c.isVisible){c.mobile_setup()}c.$el.on("beforeVisible.keyboard",function(){c.$keyboard.css("visibility","hidden")}).on("visible.keyboard",function(){c.mobile_setup();c.$keyboard.css("visibility","visible");c.$preview.focus()})};c.mobile_setup=function(){var d,h=b.extend({},e.buttonMarkup,e.buttonAction);c.$keyboard.addClass("ui-bar ui-bar-"+e.container.theme).removeClass("ui-widget ui-widget-content").find("button:not(."+c.options.css.buttonAction+")").addClass(c.modButton(e.buttonMarkup)).end().find("."+c.options.css.buttonAction).addClass(c.modButton(h)).end().find("button").removeClass("ui-corner-all ui-state-default").hover(function(){b(this).addClass("ui-btn-hover-"+e.buttonHover.theme)},function(){b(this).removeClass("ui-btn-hover-"+e.buttonHover.theme)});c.options.css.buttonAction="ui-btn-down-"+e.buttonActive.theme;if(c.msie&&c.$preview[0]!==c.el){c.$preview.hide();c.$keyboard.css("width","");c.width=c.$keyboard.outerWidth();c.$keyboard.width(c.width+parseInt(c.$preview.css("fontSize"),10));c.$preview.width(c.width);c.$preview.show()}d=c.options.position;d.of=d.of||c.$el.data("keyboardPosition")||c.$el;d.collision=(c.options.usePreview)?d.collision||"fit fit":"flip flip";c.$keyboard.position(d)};c.modButton=function(d){return"ui-btn ui-btn-up-"+d.theme+" ui-btn-"+d.theme+(d.shadow=="true"?" ui-shadow":"")+(d.corners=="true"?" ui-btn-corner-all":"")};c.mobile_init()})}})(jQuery);