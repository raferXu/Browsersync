(function(a){a.fn.addMobile=function(b){var d,c={container:{theme:"a"},buttonMarkup:{theme:"a",shadow:"true",corners:"true"},buttonHover:{theme:"c"},buttonAction:{theme:"b"},buttonActive:{theme:"e"}};return this.each(function(){var e=a(this).data("keyboard");if(!e||typeof(a.fn.textinput)==="undefined"){return}e.mobile_options=d=a.extend({},c,b);e.mobile_init=function(){a(".ui-keyboard-input").textinput();if(e.options.alwaysOpen&&e.isVisible){e.mobile_setup()}e.$el.on("beforeVisible.keyboard",function(){e.$keyboard.css("visibility","hidden")}).on("visible.keyboard",function(){e.mobile_setup();e.$keyboard.css("visibility","visible");e.$preview.focus()})};e.mobile_setup=function(){var g,f=a.extend({},d.buttonMarkup,d.buttonAction);e.$keyboard.addClass("ui-bar ui-bar-"+d.container.theme).removeClass("ui-widget ui-widget-content").find("button:not(."+e.options.css.buttonAction+")").addClass(e.modButton(d.buttonMarkup)).end().find("."+e.options.css.buttonAction).addClass(e.modButton(f)).end().find("button").removeClass("ui-corner-all ui-state-default").hover(function(){a(this).addClass("ui-btn-hover-"+d.buttonHover.theme)},function(){a(this).removeClass("ui-btn-hover-"+d.buttonHover.theme)});e.options.css.buttonAction="ui-btn-down-"+d.buttonActive.theme;if(e.msie&&e.$preview[0]!==e.el){e.$preview.hide();e.$keyboard.css("width","");e.width=e.$keyboard.outerWidth();e.$keyboard.width(e.width+parseInt(e.$preview.css("fontSize"),10));e.$preview.width(e.width);e.$preview.show()}g=e.options.position;g.of=g.of||e.$el.data("keyboardPosition")||e.$el;g.collision=(e.options.usePreview)?g.collision||"fit fit":"flip flip";e.$keyboard.position(g)};e.modButton=function(f){return"ui-btn ui-btn-up-"+f.theme+" ui-btn-"+f.theme+(f.shadow=="true"?" ui-shadow":"")+(f.corners=="true"?" ui-btn-corner-all":"")};e.mobile_init()})}})(jQuery);