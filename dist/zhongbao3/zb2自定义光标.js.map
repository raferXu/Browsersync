{"version":3,"sources":["../../zhongbao3/zb2自定义光标.js"],"names":["setInputVal","task","str","info","alg_answer","$","val","keyboardEvent","h5board","initialize","options","maxLength","_cursorIndex","_$input","_$fakeInput","_$cursor","on","e","_onFocus","bind","$target","target","hasClass","_onBlur","blur","_showCursor","left","offset","x","clientX","pageX","cursorIndex","parseInt","length","html","substr","htmlCurosr","strArr","split","off","touchstart","preventDefault","css","document","scrollTop","show","animate","touchend","delTimer3","setTimeout","clearInterval","delTimer1","delTimer2","hide","pop","join","setInterval","console","log","push","event","stopPropagation","jsloadDone"],"mappings":"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","file":"zb2自定义光标.js","sourcesContent":["/**\n * Created by raferxu on 17/7/6.\n */\nfunction setInputVal(task) {\n  //发送图片获取识别字符串，并放入input中\n  var str = task.info.alg_answer || '';\n  $('.showInfo').val(str);\n  keyboardEvent(str);\n}\nvar h5board = (function () {\n  return {\n    initialize: function(options) {\n\n      this.maxLength = options.maxLength || 18;\n      this._cursorIndex = 0;\n      this._$input = $('.input-input');\n      this._$fakeInput = $('.input-fake');\n      this._$cursor = $('.input-cursor');\n\n      this._$input.on('click', function(e) {\n        this._onFocus(e);\n      }.bind(this));\n      $('body').on('click', function(e) {\n        // click other div, hide keyboard\n        var $target = $(e.target);\n        if ($target.hasClass('input-input') || $target.hasClass('input-fake') ||\n          $target.hasClass('input-clear') || $target.hasClass('input-clear-icon')) {\n          this._onFocus(e);\n        } else {\n          this._onBlur();\n        }\n      }.bind(this));\n\n      this.blur();\n      return this;\n    },\n    _showCursor: function(e) {\n      var left = this._$input.offset().left;\n      var x = e.x || e.clientX || e.pageX;\n      var val = this._$input.val();\n      var cursorIndex = (x - left > 0) ? parseInt((x - left) / 18) : 0;\n      cursorIndex = cursorIndex >= val.length ? val.length : cursorIndex;\n      this._cursorIndex = cursorIndex;\n      this._$fakeInput.html(val.substr(0, cursorIndex) + htmlCurosr);\n    },\n  }\n})();\n\nfunction keyboardEvent(str) {\n  var strArr = [];\n  strArr = str.split('');\n  $('#answerInput').off(touchstart).on(touchstart, function(e) {\n    e.preventDefault();\n    $('#keyboardWrap').css('top',$(document).scrollTop()+'px').show();\n    // alert($(document).scrollTop());\n    $('.keyboard').animate({'bottom': 0},function () {\n      $(document).on(touchend, function(e) {\n        var delTimer3 = setTimeout(function () {\n          clearInterval(delTimer1);\n          clearInterval(delTimer2);\n          clearInterval(delTimer3);\n        },0);\n      });\n    });\n  });\n  $('#sureTotalBtn').off(touchstart).on(touchstart, function(e) {\n    e.preventDefault();\n    $('.keyboard').animate({'bottom': '-4rem'},function () {\n      $(document).off(touchend);\n      $('#keyboardWrap').hide();\n    });\n  });\n  var delTimer1 = null, delTimer2 = null;\n  $('#delTxt').off(touchstart).on(touchstart, function(e) {\n    e.preventDefault();\n    if(strArr.length>0){\n      strArr.pop();\n      $('.showInfo').val(strArr.join(''));\n      delTimer1 = setInterval(function () {\n        console.log('delTimer1');\n        strArr.pop();\n        $('.showInfo').val(strArr.join(''));\n        if(strArr.length>0){\n          delTimer2 = setInterval(function () {\n            clearInterval(delTimer1);\n            strArr.pop();\n            $('.showInfo').val(strArr.join(''));\n            console.log('delTimer2');\n          },200);\n        }\n      },500);\n    }\n  });\n  $('#keyboardM').off(touchstart).on(touchstart, '.zi', function(e) {\n    e.preventDefault();\n    strArr.push($(this).html());\n    $('.showInfo').val(strArr.join(''));\n  });\n  $('#keyboardWrap').off(touchstart).on(touchstart, function () {\n    $(this).hide();\n  });\n  $('#keyboard').off(touchstart).on(touchstart, function (event) {\n    event.stopPropagation();\n  });\n}\n\njsloadDone = true;\nconsole.log('jsloadDone: '+jsloadDone);"]}