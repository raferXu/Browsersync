<link rel="stylesheet" href="http://192.168.0.122:3000/Browersync/zhongbao3/h5/common.css">
<link rel="stylesheet" href="http://192.168.0.122:3000/Browersync/zhongbao3/h5/codeLock3.css">
<div class="row skeleton">
    <header><h1 class="tc fwn">平安众包</h1></header>
    <main>
        <div class="wrap">
            <section class="billBox">
                <div class="imgWrap" style="width:100%;height:1.1rem;overflow:hidden">
                    <div id="billImgBox" class="billImgBox pinch-zoom">
                        <img id="billImg" style="display:none" class="billImg" alt="billImg">
                    </div>
                </div>
                <p class="task_rand_score" id="scoreBox">任务奖励:<span id="score">100</span>(分/单)</p>
                <div class="billOperate">
                    <nav class="clearfloat" style="margin-bottom: 0">
                        <img src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/billIcon.png" alt="billIcon" class="icon l">
                        <span class="l">票据显示</span>
                        <span id="taskGuideBox" class="taskGuide r">
                             <img id="taskGuide" src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/taskGuide.png" alt="taskGuide">
                        </span>
                    </nav>
                    <div class="showInfo">
                        <div class="codeLockWrap" id="codeLockWrap">
                            <input class="ansNum" id="n1" value="0" type="number"/><input class="ansNum" id="n2" value="1" type="number"/><input class="ansNum" id="n3" value="2" type="number"/><input class="ansNum" id="n4" value="3" type="number"/><input class="ansNum" id="n5" value="4" type="number"/>
                            <input class="ansNum" id="n6" value="5" type="number"/><input class="ansNum" id="n7" value="6" type="number"/><input class="ansNum" id="n8" value="7" type="number"/><input class="ansNum" id="n9" value="8" type="number"/><input class="ansNum" id="n10" value="9" type="number"/>
                        </div>
                    </div>
                    <p class="textTip tc">请适当修改，保证文本输入框与图片内容一致</p>
                    <div id="btns" class="btns">
                        <input id="indistinct" type="button" class="next tc bsb" value="看不清">
                        <input id="next" type="button" class="next tc bsb" value="下一张">
                    </div>
                </div>
            </section>
            <div class="divide"></div>
            <section class="countBox">
                <nav class="clearfloat">
                    <img src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/count.png" alt="count" class="icon l">
                    <span class="l">任务统计</span>
                    <span id="moreBox" class="more r">
                       <img id="more" src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/more.png" alt="more">
                    </span>
                </nav>
                <div class="clearfloat countInfo">
                    <div id="today_orderBox" class="l tc total today_order">
                        <p>今日提交(单):</p>
                        <p id="today_order" class="num">0</p>
                    </div>
                    <div id="totalBox" class="l tc total">
                        <p>累计提交(单):</p>
                        <p id="total" class="num">0</p>
                    </div>
                </div>
            </section>
        </div>
    </main>
</div>
<div id="showMes" style="display:none;position:absolute;left:0;right:0;top:0;bottom:0;background:transparent;color:white;text-align:center;font-size:36px;z-index:10000;">
    <div style="position:absolute;top:50%;left:50%;width:1.2rem;height:.65rem;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:rgba(0,0,0,.7);border-radius:.1rem">
        <img src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/loading.png" alt="loading" style="display:block;width:.36rem;height:.36rem;margin:.15rem auto;animation:change 2s linear infinite;-webkit-animation:change 2s linear infinite;">
    </div>
</div>
<div id="offLine" style="display:none;width:100%;height:100%;position:absolute;left:0;right:0;top:0;bottom:0;background:rgba(0,0,0,.3);color:#ff6000;text-align:center;font-size:.24rem;z-index:9999;">
    <div style="position:absolute;top:50%;left:50%;width:2.4rem;height:1.2rem;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:rgba(255,255,255,1);border-radius:.1rem">
        <p style="width:100%;height:.82rem;line-height:.82rem;color:#323232;border-bottom:1px solid #c8c8c8;box-sizing:border-box">网络不给力,请检查网络设置</p>
        <p id="sureBtn" class="l" style="width:100%;height:.38rem;line-height:.38rem;color:#ff6000">确定</p>
    </div>
</div>
<div id="toLogin" style="display:none;width:100%;height:100%;position:absolute;left:0;right:0;top:0;bottom:0;color:#ff6000;text-align:center;font-size:24px;z-index:9998;">
    <div style="display:none;position:absolute;top:50%;left:50%;width:2.4rem;height:1.2rem;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:rgba(255,255,255,1);border-radius:.1rem">
        <p style="width:100%;height:.82rem;line-height:.82rem;color:#323232;border-bottom:1px solid #c8c8c8;box-sizing:border-box">未登录</p>
        <div class="clearfloat" style="width:100%;height:.38rem;line-height:.38rem">
            <p id="cacelBtn" class="l" style="width:50%;color:#ff6000;border-right:1px solid #c8c8c8;box-sizing:border-box">取消</p>
            <p id="loginBtn" class="l" style="width:50%;color:#ff6000">登录</p>
        </div>
    </div>
</div>
<div id="answerTip" style="display:none;width:100%;height:100%;position:absolute;left:0;right:0;top:0;bottom:0;background:rgba(0,0,0,.3);color:#ff6000;text-align:center;font-size:.24rem;z-index:9999;">
    <div style="position:absolute;top:50%;left:50%;width:2.4rem;height:1.2rem;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:rgba(255,255,255,1);border-radius:.1rem">
        <p style="width:100%;height:.82rem;line-height:.82rem;color:#323232;border-bottom:1px solid #c8c8c8;box-sizing:border-box">请输入与图像一致的信息内容。</p>
        <p id="answerTipBtn" class="l" style="width:100%;height:.38rem;line-height:.38rem;color:#ff6000">确定</p>
    </div>
</div>
<div id="failData" style="display:none;width:100%;height:100%;position:absolute;left:0;right:0;top:0;bottom:0;background:rgba(0,0,0,.3);color:#ff6000;text-align:center;font-size:.24rem;z-index:9999;">
    <div style="position:absolute;top:50%;left:50%;width:80%;height:.8rem;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background:rgba(255,255,255,1);border-radius:.1rem">
        <p style="width:100%;height:.8rem;line-height:.8rem;color:#323232;border-bottom:1px solid #c8c8c8;box-sizing:border-box">数据获取失败。</p>
    </div>
</div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    /* * * DON'T EDIT BELOW THIS LINE * * */
    function loadDisqus() {
      $("#disqus_thread").toggle();
      $(".btn-disqus").toggle();
      var disqus_shortname = 'pybossa';
      var disqus_developer = 1;
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    }
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<script src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/common.js"></script>
<script src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/inputSwipe.js"></script>
<script src="http://192.168.0.122:3000/Browersync/zhongbao3/h5/num.js"></script>
<script type="text/javascript">
    pybossa.presentTask(function(task, deferred) {
      if ( !$.isEmptyObject(task) ) {
        console.log('运行presentTask函数时拿到的任务为: '+task);
        imgHandleFn(task);
        setInputVal(task,10,'0123456789',blockStr);
//获取token
//        var jobTaskLoadedTimer = setInterval(function() {
//          if(jobTaskLoaded){
//            clearInterval(jobTaskLoadedTimer);
//            var tokenStr = getTokenAndPort().tokenStr;
            var interface = gInterface;
            showPageData(task,tokenStr,interface);
            bindJumpNative();
//拿到token判断有没登录
            if(!tokenStr){
              console.log('没有拿到token值！');
              noTokenHandle();
            }else{
              console.log('拿到了token值，为 '+tokenStr);
              $('#toLogin').hide();
//点击下一张按钮
              $('#next,#indistinct').off(touchstart).on(touchstart, function() {
                $("#showMes").show();
                var touchstartWhich = $(this).attr('id')=='indistinct';
                if(!window.navigator.onLine){
                  $('#offLine').show();
                }else{
                  var answer = touchstartWhich ? {"text": '看不清'} : {"text": getCurStr()};
                  normalSubmit(task,answer,tokenStr,interface,deferred);
                }
              });
            }
//          }else{
//            console.log('本地nativeLoadCompleted函数没有被native调用');
//          }
//        },50);
      }
      else {
        console.log('运行presentTask函数时候已经没有任务了,自动重新刷新页面获取可用任务');
        console.log('只加载本次任务，不会出现这个日志');
      }
    });
    pybossa.run('sn');
</script>
