<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>原生JavaScript实现字符串长度截取</title>
</head>
<body>
<script>
  function cutstr(str, len) {
    var temp;
    var icount = 0;
    var patrn = /[^\x00-\xff]/;  //中文
    var strre = "";
    for (var i = 0; i < str.length; i++) {
      if (icount < len ) {
        temp = str.substr(i, 1);
        if (patrn.exec(temp) == null) {
          console.log('1');
          icount = icount + 1
        } else {
          console.log('2');
          icount = icount + 2  //中文当2个字符
        }
        strre += temp
      } else {
        break
      }
    }
    return strre + "..."
  }
  alert(cutstr('许raferxu', 5));
</script>
</body>
</html>